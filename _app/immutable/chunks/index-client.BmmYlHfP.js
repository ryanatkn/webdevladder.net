import{l as D,S as O,n as r,o as S,q as T,v as g,w as b,x as A,h as o,g as w,f as y,y as E,u as m,z as I,A as M,B as k,C as v,D as _,F as P,G as B}from"./runtime.yMTz_KVN.js";import{U as d}from"./disclose-version.CenmLMN3.js";function h(e,n=null,s){if(typeof e=="object"&&e!=null&&!D(e)&&!(O in e)){if(r in e){const t=e[r];if(t.t===e||t.p===e)return t.p}const i=I(e);if(i===S||i===T){const t=new Proxy(e,L);return g(e,r,{value:{s:new Map,v:b(0),a:A(e),p:t,t:e},writable:!0,enumerable:!1}),t}}return e}function x(e,n=1){o(e,e.v+n)}const L={defineProperty(e,n,s){if(s.value){const i=e[r],t=i.s.get(n);t!==void 0&&o(t,h(s.value,i))}return Reflect.defineProperty(e,n,s)},deleteProperty(e,n){const s=e[r],i=s.s.get(n),t=s.a,f=delete e[n];if(t&&f){const a=s.s.get("length"),l=e.length-1;a!==void 0&&a.v!==l&&o(a,l)}return i!==void 0&&o(i,d),f&&x(s.v),f},get(e,n,s){var f;if(n===r)return Reflect.get(e,r);const i=e[r];let t=i.s.get(n);if(t===void 0&&(!(n in e)||(f=w(e,n))!=null&&f.writable)&&(t=b(h(e[n],i)),i.s.set(n,t)),t!==void 0){const a=y(t);return a===d?void 0:a}return Reflect.get(e,n,s)},getOwnPropertyDescriptor(e,n){const s=Reflect.getOwnPropertyDescriptor(e,n);if(s&&"value"in s){const t=e[r].s.get(n);t&&(s.value=y(t))}return s},has(e,n){var f;if(n===r)return!0;const s=e[r],i=Reflect.has(e,n);let t=s.s.get(n);return(t!==void 0||E!==null&&(!i||(f=w(e,n))!=null&&f.writable))&&(t===void 0&&(t=b(i?h(e[n],s):d),s.s.set(n,t)),y(t)===d)?!1:i},set(e,n,s,i){const t=e[r];let f=t.s.get(n);f===void 0&&(m(()=>i[n]),f=t.s.get(n)),f!==void 0&&o(f,h(s,t));const a=t.a,l=!(n in e);if(a&&n==="length")for(let c=s;c<e.length;c+=1){const u=t.s.get(c+"");u!==void 0&&o(u,d)}if(e[n]=s,l){if(a){const c=t.s.get("length"),u=e.length;c!==void 0&&c.v!==u&&o(c,u)}x(t.v)}return!0},ownKeys(e){const n=e[r];return y(n.v),Reflect.ownKeys(e)}};function R(e,n){var i;var s=e&&((i=e[r])==null?void 0:i.t);return e===n||s===n}function F(e={},n,s,i){M(()=>{var t,f;return k(()=>{t=f,f=(i==null?void 0:i())||[],m(()=>{e!==s(...f)&&(n(e,...f),t&&R(s(...t),e)&&n(null,...t))})}),()=>{v(()=>{f&&R(s(...f),e)&&n(null,...f)})}})}function N(e){_===null&&P(),_.l!==null?j(_).m.push(e):B(()=>{const n=m(e);if(typeof n=="function")return n})}function K(e){_===null&&P(),N(()=>()=>m(e))}function j(e){var n=e.l;return n.u??(n.u={a:[],b:[],m:[]})}export{K as a,F as b,N as o,h as p};
