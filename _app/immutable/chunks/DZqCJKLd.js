import"./DsnmJJEf.js";import{a as ie}from"./D5uM8vZ8.js";import{p as oe,A as le,ao as _,am as C,a as Z,b as x,c as ue,aV as de,ap as H,f as ce,d as ge,r as pe,ak as _e,t as he,au as fe}from"./D7FU56SK.js";import{s as me}from"./CmPS7TrA.js";import{i as B}from"./C_HhJsCU.js";import{h as Fe}from"./CKzlWlK6.js";import{s as K}from"./BZv4O-dO.js";import{e as be}from"./B_N3Hybf.js";import{a as Q,C as ve}from"./C8ooRc0k.js";import{b as we}from"./C1JY1n1h.js";import{p as I}from"./BSPJaKlk.js";class j{type;content;alias;length;constructor(e,t,r,n=""){this.type=e,this.content=t,this.alias=r,this.length=n.length}}const Y=(a,e)=>{var{rest:t}=e;if(t){for(var r in t)e[r]=t[r];e.rest=void 0}var n=new ye;return M(n,n.head,a),ae(a,n,e,n.head,0),ke(n)},ae=(a,e,t,r,n,s)=>{for(var i in t){var o=t[i];if(o){o=Array.isArray(o)?o:[o];for(var l=0;l<o.length;++l){if(s&&s.cause===i+","+l)return;var c=o[l],h=c.inside,F=!!c.lookbehind,f=!!c.greedy,A=c.alias;if(f&&!c.pattern.global){var T=c.pattern.toString().match(/[imsuy]*$/)[0];c.pattern=RegExp(c.pattern.source,T+"g")}for(var N=c.pattern||c,u=r.next,g=n;u!==e.tail&&!(s&&g>=s.reach);g+=u.value.length,u=u.next){var w=u.value;if(e.length>a.length)return;if(!(w instanceof j)){var $=1,d;if(f){if(d=U(N,g,a,F),!d||d.index>=a.length)break;var E=d.index,S=d.index+d[0].length,p=g;for(p+=u.value.length;E>=p;)u=u.next,p+=u.value.length;if(p-=u.value.length,g=p,u.value instanceof j)continue;for(var z=u;z!==e.tail&&(p<S||typeof z.value=="string");z=z.next)$++,p+=z.value.length;$--,w=a.substring(g,p),d.index-=g}else if(d=U(N,0,w,F),!d)continue;var E=d.index,m=d[0],b=w.substring(0,E),O=w.substring(E+m.length),D=g+w.length;s&&D>s.reach&&(s.reach=D);var R=u.prev;b&&(R=M(e,R,b),g+=b.length),xe(e,R,$);var y=new j(i,h?Y(m,h):m,A,m);if(u=M(e,R,y),O&&M(e,u,O),$>1){var v={cause:i+","+l,reach:D};ae(a,e,t,u.prev,g,v),s&&v.reach>s.reach&&(s.reach=v.reach)}}}}}}};class ye{head;tail;length=0;constructor(){this.head={value:null,prev:null,next:null},this.tail={value:null,prev:this.head,next:null},this.head.next=this.tail}}const M=(a,e,t)=>{var r=e.next,n={value:t,prev:e,next:r};return e.next=n,r.prev=n,a.length++,n},xe=(a,e,t)=>{for(var r=e.next,n=0;n<t&&r!==a.tail;n++)r=r.next;e.next=r,r.prev=e,a.length-=n},ke=a=>{for(var e=[],t=a.head.next;t!==a.tail;)e.push(t.value),t=t.next;return e},U=(a,e,t,r)=>{a.lastIndex=e;var n=a.exec(t);if(n&&r&&n[1]){var s=n[1].length;n.index+=s,n[0]=n[0].substring(s)}return n};class Ae{langs={plaintext:{}};add_lang(e,t,r){if(this.langs[e]=t,r!==void 0)for(var n of r)this.langs[n]=t}add_extended_lang(e,t,r,n){var s=this.extend_grammar(e,r);return this.add_lang(t,s,n),s}get_lang(e){var t=this.langs[e];if(t===void 0)throw Error(`The language "${e}" has no grammar.`);return t}stylize(e,t,r=this.get_lang(t)){var n={code:e,grammar:r,lang:t,tokens:void 0};return this.run_hook_before_tokenize(n),n.tokens=Y(n.code,n.grammar),this.run_hook_after_tokenize(n),this.stringify_token(X(n.tokens),n.lang)}grammar_insert_before(e,t,r,n=this.langs){var s=n[e],i={};for(var o in s){if(o===t)for(var l in r)i[l]=r[l];Object.hasOwn(r,o)||(i[o]=s[o])}var c=n[e];return n[e]=i,ne(this.langs,(h,F,f)=>{f===c&&F!==e&&(h[F]=i)}),i}stringify_token(e,t){if(typeof e=="string")return e;if(Array.isArray(e)){var r="";for(var n of e)r+=this.stringify_token(n,t);return r}var s={type:e.type,content:this.stringify_token(e.content,t),tag:"span",classes:["token",e.type],attributes:{},lang:t},i=e.alias;i&&(Array.isArray(i)?s.classes.push(...i):s.classes.push(i)),this.run_hook_wrap(s);var o="";for(var l in s.attributes)o+=" "+l+'="'+(s.attributes[l]||"").replace(/"/g,"&quot;")+'"';return"<"+s.tag+' class="'+s.classes.join(" ")+'"'+o+">"+s.content+"</"+s.tag+">"}extend_grammar(e,t){return{...V(this.get_lang(e)),...t}}plugins={};hooks_before_tokenize=[];hooks_after_tokenize=[];hooks_wrap=[];add_hook_before_tokenize(e){this.hooks_before_tokenize.push(e)}add_hook_after_tokenize(e){this.hooks_after_tokenize.push(e)}add_hook_wrap(e){this.hooks_wrap.push(e)}run_hook_before_tokenize(e){for(var t of this.hooks_before_tokenize)t(e)}run_hook_after_tokenize(e){for(var t of this.hooks_after_tokenize)t(e)}run_hook_wrap(e){for(var t of this.hooks_wrap)t(e)}}const ne=(a,e,t=new Set)=>{for(var r in a){e(a,r,a[r]);var n=a[r];n&&typeof n=="object"&&!(n instanceof RegExp)&&!t.has(L(n))&&(t.add(L(n)),ne(n,e,t))}};var Se=0;const X=a=>a instanceof j?new j(a.type,X(a.content),a.alias):Array.isArray(a)?a.map(X):a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," "),ze=Symbol("id"),L=a=>a[ze]??=++Se,V=(a,e=new Map)=>{var t,r,n;if(Array.isArray(a)){if(r=L(a),n=e.get(r),n)return n;t=[],e.set(r,t);for(var s=0;s<a.length;s++)t[s]=V(a[s],e);return t}else if(a&&typeof a=="object"&&!(a instanceof RegExp)){if(r=L(a),n=e.get(r),n)return n;t={},e.set(r,t);for(var i in a)t[i]=V(a[i],e);return t}else return a},$e=a=>{const e={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},processing_instruction:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE[^>]*>/i,greedy:!0},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>/=$<%]+(?:\s(?:\s*[^\s>/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>/:]+:/}},special_attr:[],attr_value:{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr_equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0,alias:"attr_quote"}],entity:void 0}},punctuation:/\/?>/,attr_name:{pattern:/[^\s>/]+/,inside:{namespace:/^[^\s>/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named_entity"},/&#x?[\da-f]{1,8};/i]};e.tag.inside.attr_value.inside.entity=e.entity,a.add_lang("markup",e,["html","mathml","svg"]),a.add_extended_lang("markup","xml",{},["ssml","atom","rss"])},G=(a,e,t,r="markup")=>{const n="lang_"+t;a.grammar_insert_before(r,"cdata",{[e]:{pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,()=>e),"i"),lookbehind:!0,greedy:!0,inside:{included_cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:{cdata:/^<!\[CDATA\[|\]\]>$/i,[n]:{pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:a.get_lang(t)}}},[n]:{pattern:/[\s\S]+/,inside:a.get_lang(t)}}}})},re=(a,e,t)=>{a.get_lang("markup").tag.inside.special_attr.push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+e+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{attr_name:/^[^\s=]+/,attr_value:{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[t,"lang_"+t],inside:a.get_lang(t)},punctuation:[{pattern:/^=/,alias:"attr_equals"},{pattern:/"|'/,alias:"attr_quote"}]}}}})};var q=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;const Ee=a=>{const e={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+q.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,selector_function_argument:{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+q.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+q.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+q.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:q,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/};e.atrule.inside.rest=e,a.add_lang("css",e),G(a,"style","css"),re(a,"style","css")},J="class|extends|implements|instanceof|interface|new",Re=a=>{const e={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},class_name:{pattern:new RegExp(`(\\b(?:${J}|trait)\\s+|\\bcatch\\s+\\()[\\w.\\\\]+`,"i"),lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/};a.add_lang("clike",e)},Ce=a=>{const e=a.get_lang("clike"),t="class|const|debugger|delete|enum|extends|function|implements|in|instanceof|interface|let|new|null|of|package|private|protected|public|static|super|this|typeof|undefined|var|void|with",r="as|await|break|case|catch|continue|default|do|else|export|finally|for|from|if|import|return|switch|throw|try|while|yield",n=`assert|async|${t}|get|set|${r}`,s=a.add_extended_lang("clike","js",{class_name:[e.class_name,{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:new RegExp(`(^|[^.]|\\.\\.\\.\\s*)\\b(?:assert(?=\\s*\\{)|async(?=\\s*(?:function\\b|\\*|\\(|[$\\w\\xA0-\\uFFFF]|$))|${t}|(?:get|set)(?=\\s*(?:[#[$\\w\\xA0-\\uFFFF]|$)))\\b`),lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/});s.class_name[0].pattern=new RegExp(`(\\b(?:${J})\\s+)[\\w.\\\\]+`),a.grammar_insert_before("js","function",{special_keyword:new RegExp(`\\b(?:${r})\\b`)}),a.grammar_insert_before("js","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{regex_source:{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"lang_regex",inside:a.langs.regex},regex_delimiter:/^\/|\/$/,regex_flags:/^[a-z]+$/}},function_variable:{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:s},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:s},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:s},{pattern:new RegExp(`((?:\\b|\\s|^)(?!(?:${n})(?![$\\w\\xA0-\\uFFFF]))(?:(?!\\s)[_$a-zA-Z\\xA0-\\uFFFF](?:(?!\\s)[$\\w\\xA0-\\uFFFF])*\\s*)\\(\\s*|\\]\\s*\\(\\s*)(?!\\s)(?:[^()\\s]|\\s+(?![\\s)])|\\([^()]*\\))+(?=\\s*\\)\\s*\\{)`),lookbehind:!0,inside:s}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/,capitalized_identifier:{pattern:/\b[A-Z][\w]*\b/,alias:"class_name"}}),a.grammar_insert_before("js","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},template_string:{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{template_punctuation:{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{interpolation_punctuation:{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:s}},string:/[\s\S]+/}},string_property:{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),a.grammar_insert_before("js","operator",{literal_property:{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),G(a,"script","js"),re(a,"on\\w+","js")},Ze=a=>{const e=a.add_extended_lang("js","ts",{class_name:{pattern:new RegExp(`(\\b(?:${J}|type)\\s+)(?!keyof\\b)(?!\\s)[_$a-zA-Z\\xA0-\\uFFFF](?:(?!\\s)[$\\w\\xA0-\\uFFFF])*(?:\\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>)?`),lookbehind:!0,greedy:!0,inside:null},builtin:/\b(?:Array|Function|Promise|any|boolean|console|never|number|string|symbol|unknown)\b/,function_variable:{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)(?:\s*:\s*(?:(?!=>).)+)?\s*=>|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*=>)))/,alias:"function"}});e.keyword.push(/\b(?:abstract|declare|is|keyof|readonly|require|satisfies)\b/,/\b(?:asserts|infer|interface|module|namespace|type)\b(?=\s*(?:[{_$a-zA-Z\xA0-\uFFFF]|$))/,/\btype\b(?=\s*(?:[{*]|$))/),delete e.parameter,delete e.literal_property;var t=a.extend_grammar("ts",{type_name:{pattern:/\b[A-Z]\w*/,alias:"class_name"}});t.class_name=void 0,e.class_name.inside=t,a.grammar_insert_before("ts","function",{type_assertion:{pattern:/(\b(?:as|satisfies)\s+)(?!\s)[_$A-Za-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*/,lookbehind:!0,alias:"class_name"},import_type_keyword:{pattern:/(\b(?:import|export)\s+)type\b|(\b(?:import|export)\s*\{[^}]*,\s*)type\b/,lookbehind:!0,alias:"special_keyword"},type_annotation:{pattern:/:(?:\s*)((?:[^<>=;,)}\s]|<[^>]*>|\[[^\]]*\]|\s)+)(?=\s*=)/,greedy:!0,inside:{":":/^:/,type:{pattern:/.+/,inside:t}}},decorator:{pattern:/@[$\w\xA0-\uFFFF]+/,inside:{at:{pattern:/^@/,alias:"operator"},function:{pattern:/^[\s\S]+/,alias:"decorator_name"}}},generic_function:{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>(?=\s*\()/,greedy:!0,inside:{function:/^#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*/,generic:{pattern:/<[\s\S]+/,alias:"class_name",inside:t}}}})},W="(if|else if|else|await|then|catch|each|html|debug|snippet)",Te=a=>{const e=a.get_lang("ts"),t={pattern:/^{(@\w+)(\s+[\s\S]*)?}$/,inside:{lang_ts:{pattern:/(@\w+\s+)([\s\S]+)/,lookbehind:!0,inside:e},at_keyword:/@\w+/,punctuation:/[{}]/}},r={at_directive:t,each:{pattern:/^{([#/]each)\s+([\s\S]*)}$/,inside:{special_keyword:/[#/]each/,lang_ts:[{pattern:/(#each\s+)[\s\S]+(?=\s+as)/,lookbehind:!0,inside:e},{pattern:/(as\s+)[\s\S]+/,lookbehind:!0,inside:e}],keyword:/as/,punctuation:/[{}]/}},block:{pattern:new RegExp("^\\{([#:/@]\\s*"+W+")\\s*([\\s\\S]*)\\}$"),inside:{special_keyword:new RegExp("[#:/@]"+W),keyword:[/as/,/then/],lang_ts:{pattern:/[\s\S]+(?=}$)/,inside:e},punctuation:/[{}]/}},punctuation:/[{}]/,lang_ts:{pattern:/[\s\S]+/,inside:e}},n={at_directive:t,punctuation:/[{}]/,lang_ts:{pattern:/[\s\S]+/,inside:e}},s=a.add_extended_lang("markup","svelte",{svelte_expression:{pattern:/\{(?:[^{}]|\{[^}]*\})*\}/,greedy:!0,inside:r},tag:{pattern:/<\/?(?!\d)[^\s>/=$<%]+(?:\s(?:\s*[^\s>/=]+(?:\s*=\s*(?:(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?:"[^"]*"|'[^']*'|{[\s\S]+?}(?=[\s/>])))|(?=[\s/>])))+)?\s*\/?>/i,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>/]+/i,inside:{punctuation:/^<\/?/,namespace:/^[^\s>/:]+:/}},svelte_expression:{pattern:/\{(?:[^{}]|\{[^}]*\})*\}/,inside:n},attr_value:{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/i,inside:{punctuation:[/^=/,{pattern:/^(\s*)["']|["']$/,lookbehind:!0}],svelte_expression:{pattern:/\{(?:[^{}]|\{[^}]*\})*\}/,inside:n}}},punctuation:/\/?>/,attr_name:{pattern:/[^\s>/]+/,inside:{namespace:/^[^\s>/:]+:/}}}}});s.tag.inside.attr_value.inside.entity=s.entity,ee(a,"style","css"),ee(a,"script","ts")},ee=(a,e,t)=>{G(a,e,t,"svelte")},De=a=>{const e={property:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?=\s*:)/,lookbehind:!0,greedy:!0},string:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?!\s*:)/,lookbehind:!0,greedy:!0},comment:{pattern:/\/\/.*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},number:/-?\b\d+(?:\.\d+)?(?:e[+-]?\d+)?\b/i,punctuation:/[{}[\],]/,operator:/:/,boolean:/\b(?:false|true)\b/,null:{pattern:/\bnull\b/,alias:"keyword"}};a.add_lang("json",e)},k=new Ae;$e(k);Ee(k);Re(k);Ce(k);Ze(k);Te(k);De(k);const qe={tag:1,constant:1,symbol:1,deleted:1,keyword:1,null:1,boolean:1,interpolation_punctuation:1,comment:2,char:2,builtin:2,inserted:2,class_name:3,number:3,attr_value:4,attr_quote:4,string:4,template_punctuation:4,selector:5,function:5,regex:5,important:5,variable:5,atrule:6,attr_name:7,property:7,decorator:7,decorator_name:7,special_keyword:8,namespace:8,rule:8,at_keyword:9,attr_equals:10,processing_instruction:10,doctype:10,cdata:10,punctuation:10,bold:11,italic:12},se=()=>!!(globalThis.CSS?.highlights&&globalThis.Highlight);class je{element_ranges;constructor(){if(!se())throw Error("CSS Highlights API not supported");this.element_ranges=new Map}highlight_from_syntax_tokens(e,t){let r=null;for(const s of e.childNodes)if(s.nodeType===Node.TEXT_NODE){r=s;break}if(!r)throw new Error("no text node to highlight");this.clear_element_ranges();const n=new Map;this.#e(t,r,n,0);for(const[s,i]of n){this.element_ranges.set(s,i);let o=CSS.highlights.get(s);o||(o=new Highlight,o.priority=qe[s]??0,CSS.highlights.set(s,o));for(const l of i)o.add(l)}}clear_element_ranges(){for(const[e,t]of this.element_ranges){const r=CSS.highlights.get(e);if(!r)throw new Error("Expected to find CSS highlight: "+e);for(const n of t)r.delete(n);r.size===0&&CSS.highlights.delete(e)}this.element_ranges.clear()}destroy(){this.clear_element_ranges()}#e(e,t,r,n){let s=n;for(const i of e){if(typeof i=="string"){s+=i.length;continue}const o=this.#t(i),l=s+o;try{const c=new Range;c.setStart(t,s),c.setEnd(t,l);const h=i.type;if(r.has(h)||r.set(h,[]),r.get(h).push(c),i.alias){const F=Array.isArray(i.alias)?i.alias:[i.alias];for(const f of F){r.has(f)||r.set(f,[]);const A=new Range;A.setStart(t,s),A.setEnd(t,l),r.get(f).push(A)}}}catch(c){throw new Error(`Failed to create range for ${i.type}: ${c}`)}Array.isArray(i.content)&&this.#e(i.content,t,r,s),s=l}return s}#t(e){if(typeof e.content=="string")return e.content.length;let t=0;for(const r of e.content)typeof r=="string"?t+=r.length:t+=this.#t(r);return t}}const te=se();var Ne=ce("<code><!></code>");function Je(a,e){oe(e,!0);const t=I(e,"lang",3,"svelte"),r=I(e,"mode",3,"auto"),n=I(e,"inline",3,!1),s=I(e,"syntax_styler",3,k);let i=de(void 0);const o=te?new je:null,l=H(()=>te&&(r()==="ranges"||r()==="auto")),c=H(()=>n()?"span":"pre"),h=H(()=>t()!==null&&s().langs[t()]!==void 0),F=H(()=>_(l)||!e.content?"":t()===null?e.content:_(h)?s().stylize(e.content,t(),e.grammar):(console.error("unsupported language",t()),e.content));o&&le(()=>{if(!_(i)||!e.content||!_(l)){o.clear_element_ranges();return}if(t()===null||!_(h)){o.clear_element_ranges();return}const T=Y(e.content,e.grammar||s().get_lang(t()));o.highlight_from_syntax_tokens(_(i),T)}),ie(()=>{o?.destroy()});var f=C(),A=Z(f);be(A,()=>_(c),!1,(T,N)=>{Q(T,d=>({...e.pre_attrs,"data-lang":t(),[ve]:d}),[()=>({code:!0,inline:n(),pre:n()})],void 0,"svelte-13cbjky");var u=Ne();Q(u,()=>({...e.code_attrs}),void 0,void 0,"svelte-13cbjky");var g=ge(u);{var w=d=>{var S=C(),p=Z(S);K(p,()=>e.children,()=>e.content),x(d,S)},$=d=>{var S=C(),p=Z(S);{var z=m=>{var b=_e();he(()=>me(b,e.content)),x(m,b)},E=m=>{var b=C(),O=Z(b);{var D=y=>{var v=C(),P=Z(v);K(P,()=>e.children,()=>_(F)),x(y,v)},R=y=>{var v=C(),P=Z(v);Fe(P,()=>_(F)),x(y,v)};B(O,y=>{e.children?y(D):y(R,!1)},!0)}x(m,b)};B(p,m=>{_(l)?m(z):m(E,!1)},!0)}x(d,S)};B(g,d=>{_(l)&&e.children?d(w):d($,!1)})}pe(u),we(u,d=>fe(i,d),()=>_(i)),x(N,u)}),x(a,f),ue()}export{Je as C};
