import{f as A,a as g,c as G,t as re,l as lt}from"./C1_BAcKw.js";import{h as ct,B as Et,g as At,l as St,i as jt,b as It,p as J,c as f,r as u,s as M,a as K,f as Y,z as r,aG as Ye,M as dt,o as Ee,A as w,t as q,be as Ne,bf as Tt,w as He,L as pt,bg as Pt,aL as ut,bh as Lt,bb as Bt}from"./B4mbPReh.js";import{s as ne}from"./DArKYCOa.js";import{s as R,h as Ue}from"./K4woUri6.js";import{B as Ut,i as S}from"./Bs4T259M.js";import{h as Rt}from"./D7gkqHf6.js";import{a as ae,C as ft,S as he,s as F,c as vt,b as Ce,d as Ht,r as Ct}from"./_cp3czrG.js";import{p as I,r as Xe}from"./DzX0x15Q.js";import{s as Ft,e as _t,b as Yt}from"./D1poKNGQ.js";import{t as ee,a as te,b as Nt,c as Xt}from"./Bxp4xJkw.js";import{b as qt}from"./DV7EAuaQ.js";import{a as oe,n as qe,g as Ze,b as Vt,e as Gt,m as $e,c as ze,f as Re,F as Jt}from"./dHuUfzcn.js";import{o as Kt,s as Ae,c as et,m as Qt}from"./DnNp3r56.js";import{c as Wt,b as Zt}from"./5ZsWYUku.js";function $t(t,e,n){ct&&Et();var s=new Ut(t);At(()=>{var a=e();s.ensure(a,n)})}function en(t,e){ct&&St(jt(t)),It(()=>{var n=e();for(var s in n){var a=n[s];a?t.style.setProperty(s,a):t.style.removeProperty(s)}})}const tn=Wt();function Se(t,e){const n=+oe(t)-+oe(e);return n<0?-1:n>0?1:n}function nn(t,e,n){const[s,a]=qe(n?.in,t,e),l=s.getFullYear()-a.getFullYear(),i=s.getMonth()-a.getMonth();return l*12+i}function an(t){return e=>{const n=Math.trunc,s=n(e);return s===0?0:s}}function sn(t,e){return+oe(t)-+oe(e)}function rn(t,e){const n=oe(t,e?.in);return n.setHours(23,59,59,999),n}function on(t,e){const n=oe(t,e?.in),s=n.getMonth();return n.setFullYear(n.getFullYear(),s+1,0),n.setHours(23,59,59,999),n}function ln(t,e){const n=oe(t,e?.in);return+rn(n,e)==+on(n,e)}function cn(t,e,n){const[s,a,l]=qe(n?.in,t,t,e),i=Se(a,l),o=Math.abs(nn(a,l));if(o<1)return 0;a.getMonth()===1&&a.getDate()>27&&a.setDate(30),a.setMonth(a.getMonth()-i*o);let c=Se(a,l)===-i;ln(s)&&o===1&&Se(s,l)===1&&(c=!1);const d=i*(o-+c);return d===0?0:d}function dn(t,e,n){const s=sn(t,e)/1e3;return an()(s)}function tt(t,e,n){const s=Vt(),a=n?.locale??s.locale??Gt,l=2520,i=Se(t,e);if(isNaN(i))throw new RangeError("Invalid time value");const o=Object.assign({},n,{addSuffix:n?.addSuffix,comparison:i}),[c,d]=qe(n?.in,...i>0?[e,t]:[t,e]),v=dn(d,c),_=(Ze(d)-Ze(c))/1e3,m=Math.round((v-_)/60);let y;if(m<2)return m===0?a.formatDistance("lessThanXMinutes",1,o):a.formatDistance("xMinutes",m,o);if(m<45)return a.formatDistance("xMinutes",m,o);if(m<90)return a.formatDistance("aboutXHours",1,o);if(m<$e){const b=Math.round(m/60);return a.formatDistance("aboutXHours",b,o)}else{if(m<l)return a.formatDistance("xDays",1,o);if(m<ze){const b=Math.round(m/$e);return a.formatDistance("xDays",b,o)}else if(m<ze*2)return y=Math.round(m/ze),a.formatDistance("aboutXMonths",y,o)}if(y=cn(d,c),y<12){const b=Math.round(m/ze);return a.formatDistance("xMonths",b,o)}else{const b=y%12,x=Math.trunc(y/12);return b<3?a.formatDistance("aboutXYears",x,o):b<9?a.formatDistance("overXYears",x,o):a.formatDistance("almostXYears",x+1,o)}}var un=A("<span><span><!></span><span><!></span><span><!></span></span>");function fn(t,e){J(e,!0);const n=I(e,"running",3,!0),s=Xe(e,["$$slots","$$events","$$legacy","inline","running","item_attrs","children"]);var a=un();ae(a,()=>({...s,class:`pending_animation ${e.class??""} ${e.inline?"display:inline-flex align-items:center":"display:flex"}`,[ft]:{running:n()}}),void 0,void 0,void 0,"svelte-13n46xd");var l=f(a);ae(l,()=>({...e.item_attrs,[he]:{"animation-delay":"0s"}}),void 0,void 0,void 0,"svelte-13n46xd");var i=f(l);{var o=k=>{var O=G(),D=Y(O);R(D,()=>e.children,()=>0),g(k,O)},c=k=>{var O=re("â€¢");g(k,O)};S(i,k=>{e.children?k(o):k(c,!1)})}u(l);var d=M(l);ae(d,()=>({...e.item_attrs,[he]:{"animation-delay":"0.09s"}}),void 0,void 0,void 0,"svelte-13n46xd");var v=f(d);{var _=k=>{var O=G(),D=Y(O);R(D,()=>e.children,()=>1),g(k,O)},m=k=>{var O=re("â€¢");g(k,O)};S(v,k=>{e.children?k(_):k(m,!1)})}u(d);var y=M(d);ae(y,()=>({...e.item_attrs,[he]:{"animation-delay":"0.3s"}}),void 0,void 0,void 0,"svelte-13n46xd");var b=f(y);{var x=k=>{var O=G(),D=Y(O);R(D,()=>e.children,()=>2),g(k,O)},h=k=>{var O=re("â€¢");g(k,O)};S(b,k=>{e.children?k(x):k(h,!1)})}u(y),u(a),g(t,a),K()}var vn=A('<span class="animation svelte-eax9wj"><!></span>'),_n=A('<button><span class="content svelte-eax9wj"><!></span> <!></button>');function mn(t,e){J(e,!0);const n=Xe(e,["$$slots","$$events","$$legacy","pending","onclick","running","title","disabled","animation","children"]);let s=Ye(void 0);var l={focus:_=>r(s)?.focus(_)},i=_n();ae(i,()=>({type:"button",...n,class:`pending_button ${e.class??""}`,disabled:e.disabled??e.pending,title:e.title,onclick:e.onclick,[ft]:{pending:e.pending}}),void 0,void 0,void 0,"svelte-eax9wj");var o=f(i),c=f(o);R(c,()=>e.children),u(o);var d=M(o,2);{var v=_=>{var m=vn(),y=f(m);{var b=h=>{var k=G(),O=Y(k);R(O,()=>e.animation),g(h,k)},x=h=>{fn(h,{get running(){return e.running}})};S(y,h=>{e.animation?h(b):h(x,!1)})}u(m),g(_,m)};S(d,_=>{e.pending&&_(v)})}return u(i),qt(i,_=>dt(s,_),()=>r(s)),g(t,i),K(l)}const je=(t,e)=>{if(Object.is(t,e))return!0;const n=typeof t;if(n!==typeof e)return!1;switch(n){case"string":case"number":case"bigint":case"boolean":case"symbol":case"undefined":case"function":return!1}if(t===null||e===null)return!1;const s=t.constructor;if(s!==e.constructor)return!1;if(Array.isArray(t)){const i=t.length;if(e.length!==i)return!1;for(let o=0;o<i;o++)if(!je(t[o],e[o]))return!1;return!0}if(s===Set){if(t.size!==e.size)return!1;for(const i of t)if(!e.has(i))return!1;return!0}if(s===Map){if(t.size!==e.size)return!1;for(const[i,o]of t)if(!e.has(i)||!je(o,e.get(i)))return!1;return!0}if(s===RegExp)return t.source===e.source&&t.flags===e.flags;if(s===Date)return Object.is(t.getTime(),e.getTime());if(s===ArrayBuffer){if(t.byteLength!==e.byteLength)return!1;const i=new Uint8Array(t),o=new Uint8Array(e),c=t.byteLength;for(let d=0;d<c;d++)if(i[d]!==o[d])return!1;return!0}if(ArrayBuffer.isView(t)){if(s===DataView){const o=t.byteLength;if(e.byteLength!==o)return!1;for(let c=0;c<o;c++)if(t.getUint8(c)!==e.getUint8(c))return!1;return!0}if(e.length!==t.length)return!1;const i=t.length;for(let o=0;o<i;o++)if(t[o]!==e[o])return!1;return!0}if(s===Number)return Object.is(t.valueOf(),e.valueOf());if(s===Boolean)return t.valueOf()===e.valueOf();if(s===Error)return t.message===e.message&&t.name===e.name;if(s===Promise)return!1;const a=Object.keys(t),l=a.length;if(l!==Object.keys(e).length)return!1;for(let i=0;i<l;i++){const o=a[i];if(!(o in e)||!je(t[o],e[o]))return!1}return!0},hn=t=>e=>{let n=!1,s=0,a=null,l,i,o,c;const d=()=>{if(!a)return;const v=a;a.disconnect(),o&&o({intersecting:n,intersections:s,el:e,observer:v}),a=null};return Ee(()=>{const v=t();if(v==null){i=void 0,o=void 0,c=void 0,a&&d();return}let _;if(typeof v=="function"?(i=v,o=void 0,c=void 0,_=void 0):(i=v.onintersect,o=v.ondisconnect,c=v.count,_=v.options),c===0){a&&d();return}(!je(l,_)||!a)&&(a&&d(),n=!1,s=0,l=_,a=new IntersectionObserver(y=>{n=y[0].isIntersecting,i&&a&&i({intersecting:n,intersections:s,el:e,observer:a,disconnect:d}),n?s++:c&&c>0&&s>=c&&d()},_),a.observe(e))}),d};var gn=A('<div class="content panel p_md mb_lg svelte-wl68el"><!></div>'),yn=A("<details><summary> </summary><!></details>"),bn=A('<div class="mastodon_status_item svelte-wl68el"><header class="svelte-wl68el"><button type="button" class="avatar plain icon_button svelte-wl68el"><img class="icon svelte-wl68el"/></button> <div class="names svelte-wl68el"><div class="name svelte-wl68el"><a> </a></div> <small class="svelte-wl68el"> </small> <small class="date svelte-wl68el"><a class="svelte-wl68el"> </a></small></div></header> <!> <div class="content svelte-wl68el"><!></div></div>');function Fe(t,e){J(e,!0);const n=w(()=>e.item.created_at),s=w(()=>e.item.edited_at),a=w(()=>e.item.content),l=w(()=>e.item.account),i=w(()=>e.item.url),o=w(()=>e.item.sensitive),c=w(()=>e.item.spoiler_text),d=w(()=>r(l).created_at),v=w(()=>r(l).avatar_static),_=w(()=>r(l).url),m=w(()=>r(l).display_name),y=w(()=>r(l).followers_count),b=w(()=>r(l).following_count),x=w(()=>r(l).acct),h=w(()=>r(l).note),k=w(()=>Re(new Date(r(d)),"PPpp")),O=w(()=>tt(new Date,new Date(r(n)))),D=w(()=>r(s)?Re(new Date(r(s)),"PPpp"):null),L=w(()=>r(s)?tt(new Date,new Date(r(s))):null),H=w(()=>Re(new Date(r(d)),"MMM yyyy"));let p=Ye(!1);const C=()=>{dt(p,!r(p))};var N=bn(),B=f(N),j=f(B);j.__click=function(...P){(r(h)?C:void 0)?.apply(this,P)};var X=f(j);u(j);var Q=M(j,2),ie=f(Q),se=f(ie),ge=f(se,!0);u(se),u(ie);var le=M(ie,2),ye=f(le,!0);u(le);var W=M(le,2),ce=f(W),ve=f(ce);u(ce),u(W),u(Q),u(B);var _e=M(B,2);{var Ie=P=>{var U=gn(),Z=f(U);Ue(Z,()=>r(h)),u(U),ee(3,U,()=>te),g(P,U)};S(_e,P=>{r(p)&&r(h)&&P(Ie)})}var de=M(_e,2),be=f(de);{var Te=P=>{var U=yn(),Z=f(U),we=f(Z,!0);u(Z);var Pe=M(Z);Ue(Pe,()=>r(a)),u(U),q(()=>ne(we,r(c)||"view sensitive content")),g(P,U)},pe=P=>{var U=G(),Z=Y(U);Ue(Z,()=>r(a)),g(P,U)};S(be,P=>{r(o)?P(Te):P(pe,!1)})}u(de),u(N),q(P=>{F(j,"title",r(h)?`${r(p)?"hide":"show"} ${r(x)}'s profile`:void 0),j.disabled=!r(h),F(j,"aria-label",r(h)?`${r(p)?"hide":"show"} ${r(x)}'s profile`:void 0),F(X,"src",r(v)),F(X,"alt",`avatar for ${r(x)??""}`),F(se,"href",r(_)),F(se,"title",P),ne(ge,r(m)),F(le,"title",`following ${r(b)??""}, ${r(y)??""} followers`),ne(ye,r(x)),F(W,"title",`posted ${r(k)??""}${r(D)?`, edited ${r(D)}`:""}, joined ${r(H)??""}`),F(ce,"href",r(i)),ne(ve,`${r(O)??""} ago${r(L)?`, edited ${r(L)} ago`:""}`)},[()=>Ft(r(_),"https://")]),g(t,N),K()}lt(["click"]);var wn=A('<li class="svelte-lw2ink"><!> <!></li>'),xn=A('<ul class="mastodon_status_tree unstyled svelte-lw2ink"></ul>');function mt(t,e){J(e,!0);const n=w(()=>e.item.id),s=w(()=>e.items.filter(o=>o.in_reply_to_id===r(n)));var a=G(),l=Y(a);{var i=o=>{var c=xn();_t(c,21,()=>r(s),d=>d.id,(d,v)=>{var _=wn(),m=f(_);Fe(m,{get item(){return r(v)}});var y=M(m,2);mt(y,{get item(){return r(v)},get items(){return e.items}}),u(_),g(d,_)}),u(c),g(o,c)};S(l,o=>{r(s).length&&o(i)})}g(t,a),K()}const kn=Object.freeze({}),Dn=t=>JSON.stringify(t,(e,n)=>{if(n!==null&&typeof n=="object"&&!Array.isArray(n)){const s={},a=Object.keys(n).sort();for(const l of a)s[l]=n[l];return s}return n}),nt="application/vnd.github+json",Mn="2022-11-28",Ve=async(t,e)=>{const{request:n,params:s,parse:a,token:l,cache:i,return_early_from_cache:o,log:c,fetch:d=globalThis.fetch}=e??kn,v=typeof t=="string"?new URL(t):t,_=v.href,m=n?.method??(s?"POST":"GET");let y,b;if(i&&(b=An(_,s,m),y=i.get(b),o&&y))return c?.info("[fetch_value] cached locally and returning early",_),c?.debug("[fetch_value] cached value",y),{ok:!0,value:y.value,headers:at(y)};const x=n?.body??(m==="GET"||m==="HEAD"?null:JSON.stringify(s??{})),h=new Headers(n?.headers);h.has("accept")||h.set("accept",v.hostname==="api.github.com"?nt:"application/json"),h.get("accept")===nt&&!h.has("x-github-api-version")&&h.set("x-github-api-version",Mn),x&&!h.has("content-type")&&h.set("content-type","application/json"),l&&!h.has("authorization")&&h.set("authorization","Bearer "+l);const k=y?.etag;if(k&&!h.has("if-none-match"))h.set("if-none-match",k);else{const C=y?.last_modified;C&&!h.has("if-modified-since")&&h.set("if-modified-since",C)}const O=new Request(v,{...n,headers:h,method:m,body:x});c?.info("[fetch_value] fetching url with headers",t),c?.debug("[fetch_value] fetching with headers",On(h));const D=await d(O);if(c?.info("[fetch_value] fetched",t,D.status,zn(D.headers)),c?.debug("[fetch_value] fetched",Object.fromEntries(D.headers.entries())),D.status===429)throw Error("ratelimited exceeded fetching url "+t);if(D.status===304){if(!y)throw Error("unexpected 304 status without a cached value");return c?.info("[fetch_value] cache hit",t),{ok:!0,value:y.value,headers:at(y)}}if(!D.ok)return{ok:!1,status:D.status,message:D.statusText};const L=D.headers.get("content-type"),H=await(!L||L.includes("json")?D.json():D.text()),p=a?a(H):H;if(c?.debug("[fetch_value] fetched json",t,p),b){const C={key:b,url:_,params:s,value:p,etag:D.headers.get("etag"),last_modified:D.headers.get("etag")?null:D.headers.get("last-modified")};i.set(b,C)}return{ok:!0,value:p,headers:D.headers}},at=t=>{const e=new Headers;return t.etag&&e.set("etag",t.etag),t.last_modified&&e.set("last-modified",t.last_modified),e},On=t=>{const e=Object.fromEntries(t.entries());return e.authorization&&(e.authorization="[REDACTED]"),e},zn=t=>{const e=t.get("x-ratelimit-limit"),n=t.get("x-ratelimit-remaining");return e||n?`ratelimit ${n} of ${e}`:""},ht=Ae(),En=Kt({key:ht,url:Ae(),params:et(),value:et(),etag:Ae().nullable(),last_modified:Ae().nullable()});Qt(ht,En);const st="::",An=(t,e,n)=>{let s=n+st+t;return e!=null&&(s+=st+Dn(e)),s};class Sn extends Error{constructor(e,n=`Unreachable case: ${e}`,s){super(n,s)}}const jn=t=>Array.isArray(t)?t:[t],In=(t,e)=>`https://${t}/api/v1/statuses/${e}`,Tn=(t,e)=>`https://${t}/api/v1/statuses/${e}/context`,pn=(t,e)=>`https://${t}/api/v1/statuses/${e}/favourited_by`,gt=t=>{try{const e=new URL(t),n=Yt(e.pathname,"/context").split("/").filter(Boolean),s=n[0]?.[0]==="@"?n[0].substring(1):null;if(!s)return null;const a=n.length>1?n[n.length-1]:null;return a?{href:t,host:e.host,author:s,status_id:a}:null}catch{return null}},Pn=async(t,e,n,s,a,l,i)=>{const o=Tn(t,e),c=await Ve(o,{request:a,token:l,cache:n,return_early_from_cache:Ne,log:s,fetch:i});return c.ok?c.value:null},Ln=async(t,e,n,s,a,l,i)=>{const o=In(t,e),c=await Ve(o,{request:a,token:l,cache:n,return_early_from_cache:Ne,log:s,fetch:i});return c.ok?c.value:null},Bn=async(t,e,n,s,a,l,i)=>{const o=pn(t,e),c=await Ve(o,{request:a,token:l,cache:n,return_early_from_cache:Ne,log:s,fetch:i});return c.ok?c.value:null},Un=async(t,e,n,s,a)=>{const l=n?jn(n):null,i=e.descendants;if(!i.length||!l?.length)return[];const o=new URL(t.url).host,c=new Set;for(const d of i)for(const v of l)if(v.type==="favourited_by"){if(!d.favourites_count)continue;if((await Bn(o,d.id,s,a))?.find(y=>v.favourited_by.includes(y.acct))){c.add(d.id);break}}else if(v.type==="minimum_favourites"){if(d.favourites_count>=v.minimum_favourites){c.add(d.id);break}}else if(v.type==="custom"){if(v.should_include(d,t,e)){c.add(d.id);break}}else throw new Sn(v);return i.filter(d=>c.has(d.id)?d:null)};function Rn(t,e){J(e,!0);let n=I(e,"include_ancestors",3,!1),s=I(e,"include_replies",3,!1),a=I(e,"loading",15),l=I(e,"item",15),i=I(e,"status_context",15),o=I(e,"replies",15),c=I(e,"load_time",15);const d=w(()=>n()||s()),v=w(()=>e.reply_filter===void 0?s()?{type:"custom",should_include:()=>!0}:null:e.reply_filter),_=async()=>{if(!e.host||!e.id)return;const b=performance.now();a(!0),await(async x=>{var h=Tt(x,2);l(h[0]),i(h[1])})(await Promise.all([Ln(e.host,e.id,e.cache,e.log),r(d)?Pn(e.host,e.id,e.cache,e.log):null])),l()&&i()?o(await Un(l(),i(),typeof r(v)=="function"?r(v)(l(),i()):r(v),e.cache,e.log)):o(null),a(!1),c(performance.now()-b)};var m=G(),y=Y(m);R(y,()=>e.children,()=>({item:l(),status_context:i(),replies:o(),load:_,loading:a(),load_time:c()})),g(t,m),K()}const rt=(t,e,n)=>{try{const s=localStorage.getItem(t);if(!s)return e();const a=JSON.parse(s);return n?.(a),a}catch{try{localStorage.removeItem(t)}catch{}return e()}},ot=(t,e)=>{try{e===void 0?localStorage.removeItem(t):localStorage.setItem(t,JSON.stringify(e))}catch{}},it={inform:{color:"var(--text_70)",icon:"âœ»"},help:{color:"var(--color_b_50)",icon:"âžº"},error:{color:"var(--color_c_50)",icon:"!?"}};var Hn=A('<div class="icon svelte-9lbevi"><!></div>'),Cn=A('<!> <div class="content svelte-9lbevi"><!></div>',1),Fn=A("<button><!></button>"),Yn=A("<div><!></div>");function Nn(t,e){J(e,!0);const n=b=>{var x=Cn(),h=Y(x);{var k=L=>{var H=Hn(),p=f(H);{var C=B=>{var j=re();q(()=>ne(j,r(d))),g(B,j)},N=B=>{var j=G(),X=Y(j);R(X,()=>e.icon,()=>r(d)),g(B,j)};S(p,B=>{!e.icon||typeof e.icon=="string"?B(C):B(N,!1)})}u(H),g(L,H)};S(h,L=>{e.icon!==null&&L(k)})}var O=M(h,2),D=f(O);R(D,()=>e.children),u(O),g(b,x)},s=I(e,"status",3,"inform"),a=Xe(e,["$$slots","$$events","$$legacy","status","color","onclick","disabled","icon","children"]),l=w(()=>it[s()]),i=w(()=>r(l).color),o=w(()=>r(l).icon),c=w(()=>e.color??r(i)),d=w(()=>typeof e.icon=="string"?e.icon:r(o)??it.inform.icon);var v=G(),_=Y(v);{var m=b=>{var x=Fn();ae(x,()=>({type:"button",...a,class:`alert ${e.class??""}`,onclick:e.onclick,disabled:e.disabled,[he]:{"--text_color":r(c)}}),void 0,void 0,void 0,"svelte-9lbevi");var h=f(x);n(h),u(x),g(b,x)},y=b=>{var x=Yn();ae(x,()=>({role:"alert",...a,class:`alert panel ${e.class??""}`,[he]:{"--text_color":r(c)}}),void 0,void 0,void 0,"svelte-9lbevi");var h=f(x);n(h),u(x),g(b,x)};S(_,b=>{e.onclick?b(m):b(y,!1)})}g(t,v),K()}var Xn=A("<div><!></div>"),qn=A('<fieldset><div><label title="where to load the toot" class="flex:1 row"><a class="icon_button box mr_lg">ðŸ”—</a> <input/></label></div> <!></fieldset>');function Vn(t,e){J(e,!0);let n=I(e,"url",15);const s=w(()=>gt(n())),a=w(()=>!!(n()&&!r(s)));var l=qn(),i=f(l);let o;var c=f(i),d=f(c);vt(d,"",{},{"font-size":"var(--font_size_xl)"});var v=M(d,2),_=b=>b.currentTarget.select();ae(v,()=>({placeholder:"> toot url",onfocus:_,...e.attrs}),void 0,void 0,void 0,void 0,!0),u(c),u(i);var m=M(i,2);{var y=b=>{var x=Xn(),h=f(x);Nn(h,{status:"error",children:(k,O)=>{He();var D=re("invalid Mastodon status url");g(k,D)},$$slots:{default:!0}}),u(x),ee(3,x,()=>te),g(b,x)};S(m,b=>{r(a)&&b(y)})}u(l),q(()=>{o=Ce(i,1,"row",null,o,{mb_lg:r(a)}),F(d,"href",n()||void 0)}),Nt(v,n),g(t,l),K()}var Gn=A("<div></div>"),Jn=A('<div class="transition_wrapper svelte-otzyot"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></div>'),Kn=A('<div class="icon_button_content svelte-otzyot"><div class="icon svelte-otzyot">ðŸ¦£</div> <div class="button_content svelte-otzyot"><div>load toot<!> from</div> <code class="ellipsis"><!></code></div></div>'),Qn=A('<div class="transition_wrapper svelte-otzyot"><!></div>'),Wn=A('<div class="pb_md"><a rel="noreferrer" class="display:block panel p_md"><span class="font_family_mono">â†ªï¸Ž</span> reply on Mastodon</a></div>'),Zn=A('<div class="loaded_message svelte-otzyot"> </div>'),$n=A(`<div class="settings controls panel svelte-otzyot"><form class="width:100%"><div class="mb_lg"><!></div> <fieldset class="row"><label class="row"><input type="checkbox"/>automatically load when
										scrolled onscreen</label></fieldset></form> <!></div>`),ea=A('<div><div class="toot_content svelte-otzyot"><!> <div class="main_post panel svelte-otzyot"><div class="panel bg_panel svelte-otzyot"><!></div></div> <!></div> <!> <div class="toot_controls svelte-otzyot"><div class="controls svelte-otzyot"><div class="row"><button type="button">settings</button> <div class="reset svelte-otzyot"><button type="button">reset</button><!></div></div></div> <!></div></div>');function ta(t,e){J(e,!0);let n=I(e,"updated_url",31,()=>pt(e.url)),s=I(e,"include_ancestors",3,!1),a=I(e,"include_replies",3,!1),l=I(e,"loading",15),i=I(e,"load_time",15),o=I(e,"initial_show_settings",3,!1),c=I(e,"show_settings",15),d=I(e,"autoload_storage_key",3,"autoload"),v=I(e,"initial_autoload",3,!1),_=I(e,"autoload",23,()=>d()?rt(d(),()=>v()):v()),m=Ye(1);const y=()=>{Pt(m),n(e.url),l(void 0),i(void 0),e.onreset?.()},b=w(()=>e.settings_storage_key&&"show_settings"+e.settings_storage_key);Ee(()=>{c()===void 0&&c(r(b)?rt(r(b),()=>o()):o())}),Ee(()=>{r(b)&&ot(r(b),c())});const x=()=>{c(!c())};Ee(()=>{d()&&ot(d(),_())});const h=w(()=>gt(n())),k=w(()=>r(h)?.status_id??null),O=w(()=>r(h)?.host??null),D=w(()=>l()!==!1&&!!r(O)),L=w(()=>l()!==void 0||n()!==e.url);var H={reset:y},p=G(),C=Y(p);return $t(C,()=>r(m),N=>{Rn(N,{get host(){return r(O)},get id(){return r(k)},get include_ancestors(){return s()},get include_replies(){return a()},get cache(){return e.cache},get log(){return e.log},get reply_filter(){return e.reply_filter},get loading(){return l()},set loading(j){l(j)},get load_time(){return i()},set load_time(j){i(j)},children:(j,X)=>{let Q=()=>X?.().item,ie=()=>X?.().status_context,se=()=>X?.().replies,ge=()=>X?.().load,le=()=>X?.().loading,ye=()=>X?.().load_time;var W=ea();let ce;var ve=f(W),_e=f(ve);{var Ie=E=>{var z=Gn();_t(z,21,()=>ie().ancestors,T=>T.id,(T,$)=>{Fe(T,{get item(){return r($)}})}),u(z),ee(3,z,()=>te),g(E,z)};S(_e,E=>{s()&&ie()&&E(Ie)})}var de=M(_e,2),be=f(de),Te=f(be);{var pe=E=>{var z=Jn(),T=f(z);en(T,()=>({"--margin":"0"})),Fe(T.lastChild,{get item(){return Q()}}),u(T),u(z),ee(3,z,()=>te),g(E,z)},P=E=>{var z=Qn(),T=f(z);{let $=w(()=>le()||!1),Be=w(()=>!r(D));mn(T,{get pending(){return r($)},get disabled(){return r(Be)},onclick:()=>ge()(),children:(De,Me)=>{var ue=Kn(),Oe=M(f(ue),2),me=f(Oe),kt=M(f(me));{var Dt=V=>{var fe=re("s");g(V,fe)};S(kt,V=>{(a()||s())&&V(Dt)})}He(),u(me);var We=M(me,2),Mt=f(We);{var Ot=V=>{var fe=re();q(()=>ne(fe,r(O))),g(V,fe)},zt=V=>{var fe=re("invalid url");g(V,fe)};S(Mt,V=>{r(O)?V(Ot):V(zt,!1)})}u(We),u(Oe),u(ue),g(De,ue)},$$slots:{default:!0}})}u(z),ee(3,z,()=>te),g(E,z)};S(Te,E=>{Q()?E(pe):E(P,!1)})}u(be),u(de);var U=M(de,2);{var Z=E=>{mt(E,{get item(){return Q()},get items(){return se()}})};S(U,E=>{Q()&&se()&&E(Z)})}u(ve);var we=M(ve,2);{var Pe=E=>{var z=Wn(),T=f(z);u(z),q(()=>F(T,"href",Q().url)),ee(3,z,()=>te),g(E,z)};S(we,E=>{Q()&&E(Pe)})}var Ge=M(we,2),xe=f(Ge),Je=f(xe),ke=f(Je);ke.__click=x;let Ke;vt(ke,"",{},{"margin-right":"var(--space_sm)"});var Qe=M(ke,2),Le=f(Qe);Le.__click=y;var yt=M(Le);{var bt=E=>{var z=Zn(),T=f(z);u(z),q($=>ne(T,`loaded in ${$??""}ms`),[()=>Math.round(ye())]),ee(3,z,()=>te),g(E,z)};S(yt,E=>{ye()!==void 0&&E(bt)})}u(Qe),u(Je),u(xe),Ht(xe,()=>hn(()=>({onintersect:({intersecting:E})=>{E&&_()&&ge()()},count:1})));var wt=M(xe,2);{var xt=E=>{var z=$n(),T=f(z),$=f(T),Be=f($);Vn(Be,{get url(){return n()},set url(me){n(me)}}),u($);var De=M($,2),Me=f(De),ue=f(Me);Ct(ue),He(),u(Me),u(De),u(T);var Oe=M(T,2);R(Oe,()=>e.settings??ut),u(z),q(()=>F(Me,"title",_()?"replies will load automatically when scrolled intersect":"replies are not loaded until you request them")),Xt(ue,_),ee(3,z,()=>te),g(E,z)};S(wt,E=>{c()&&E(xt)})}u(Ge),u(W),q(()=>{ce=Ce(W,1,"toot svelte-otzyot",null,ce,{replies:se()}),Ke=Ce(ke,1,"deselectable",null,Ke,{selected:c()}),Le.disabled=!r(L)}),ee(3,W,()=>te),g(j,W)},$$slots:{default:!0}})}),g(t,p),K(H)}lt(["click"]);var na=A('<header><h1 class="mt_xl5 mb_lg"> </h1> <p class="mb_xl5"><!></p></header>');function aa(t,e){J(e,!0);var n=na(),s=f(n),a=f(s,!0);u(s);var l=M(s,2),i=f(l);Jt(i,{get item(){return e.item}}),u(l),u(n),q(()=>ne(a,e.item.title)),g(t,n),K()}const sa=t=>{var e=ra();g(t,e)};var ra=A("<hr/>"),oa=A("<!>  <section><h2>Comments</h2> <!></section> <!>",1),ia=A("<article><!> <!> <!> <!></article>"),la=A("<div>cannot find post <code> </code></div>"),ca=A('<div class="blog_post width_atmost_md"><!></div>');function Ma(t,e){J(e,!0);const n=I(e,"separator",3,sa),a=Zt.get().items.find(v=>v.slug===e.post.slug),l=tn.get_maybe();var i=ca();Rt("n1wqo0",v=>{Lt(()=>{Bt.title=e.post.title??""})});var o=f(i);{var c=v=>{var _=ia();ae(_,()=>({...e.attrs}));var m=f(_);aa(m,{get item(){return a}});var y=M(m,2);R(y,()=>e.children);var b=M(y,2);R(b,()=>e.footer??ut);var x=M(b,2);{var h=k=>{var O=oa(),D=Y(O);R(D,n);var L=M(D,2),H=M(f(L),2);{var p=N=>{{let B=w(()=>l?.data);ta(N,{get url(){return a.comments.url},include_replies:!0,initial_autoload:!0,reply_filter:j=>({type:"favourited_by",favourited_by:[j.account.acct]}),get settings_storage_key(){return`${a.id??""}_comments_settings`},get cache(){return r(B)}})}};S(H,N=>{(!l||l.data!==void 0)&&N(p)})}u(L);var C=M(L,2);R(C,n),g(k,O)};S(x,k=>{a.comments&&k(h)})}u(_),g(v,_)},d=v=>{var _=la(),m=M(f(_)),y=f(m,!0);u(m),u(_),q(()=>ne(y,e.post.slug)),g(v,_)};S(o,v=>{a?v(c):v(d,!1)})}u(i),g(t,i),K()}export{Ma as B};
