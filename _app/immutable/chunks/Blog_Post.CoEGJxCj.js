import{a as T,t as P,p as ye,o as we,e as gn,u as Jn}from"./disclose-version.tiXKnEBk.js";import{h as qt,i as Xn,d as Gn,k as Fn,g as Kn,j as Qn,U as $n,aK as ea,w as ta,n as na,b as yn,V as aa,e as ra,u as sa,aL as ia,aM as oa,a as he,c as g,r as p,s as j,t as H,p as me,f as re,R as f,a1 as bn,az as $t,af as E,aN as en,T as Jt,aD as Ut,aO as ca,Y as xn,aJ as da}from"./runtime.CdcJ3TD1.js";import{s as ge}from"./render.DC06klNu.js";import{i as U}from"./if.CVSmFsw-.js";import{s as te,h as Bt}from"./snippet.ZuVh7Bd3.js";import{a as He,s as ee,r as kn}from"./attributes.w3HBHoux.js";import{p as B,a as la}from"./props.CrsQ1EOE.js";import{s as ua,e as wn,b as fa,i as ha}from"./string.DmgXrFfO.js";import{s as Ne,t as qe}from"./style.BXO6zDSB.js";import{t as _e,s as pe}from"./index.RvB5JgdS.js";import{b as ma,a as va}from"./input.UuVHzDkR.js";import{b as _a}from"./this.Bk78GhNE.js";import{a as Re,n as tn,e as pa,g as on,m as cn,b as St,c as ga,f as Wt,F as ya}from"./Feed_Item_Date.BmIr7C0t.js";import{c as ba,b as xa}from"./blog.CrXVC52U.js";function ka(n,e,t){qt&&Xn();var a=n,r=$n,s,i=ea;Gn(()=>{i(r,r=e())&&(s&&Fn(s),s=Kn(()=>t(a)))}),qt&&(a=Qn)}function wa(n,e){qt&&ta(na(n)),yn(()=>{var t=e();for(var a in t){var r=t[a];r?n.style.setProperty(a,r):n.style.removeProperty(a)}}),aa(()=>{n.remove()})}function Ta(n,e,t){ra(()=>{var a=sa(()=>e(n,t==null?void 0:t())||{});if(t&&(a!=null&&a.update)){var r=!1,s={};yn(()=>{var i=t();ia(i),r&&oa(s,i)&&(s=i,a.update(i))}),r=!0}if(a!=null&&a.destroy)return()=>a.destroy()})}const Sa=ba();function Et(n,e){const t=+Re(n)-+Re(e);return t<0?-1:t>0?1:t}function Ea(n,e,t){const[a,r]=tn(t==null?void 0:t.in,n,e),s=a.getFullYear()-r.getFullYear(),i=a.getMonth()-r.getMonth();return s*12+i}function Za(n){return e=>{const a=(n?Math[n]:Math.trunc)(e);return a===0?0:a}}function Oa(n,e){return+Re(n)-+Re(e)}function Ca(n,e){const t=Re(n,e==null?void 0:e.in);return t.setHours(23,59,59,999),t}function Na(n,e){const t=Re(n,e==null?void 0:e.in),a=t.getMonth();return t.setFullYear(t.getFullYear(),a+1,0),t.setHours(23,59,59,999),t}function Ia(n,e){const t=Re(n,e==null?void 0:e.in);return+Ca(t,e)==+Na(t,e)}function Ra(n,e,t){const[a,r,s]=tn(t==null?void 0:t.in,n,n,e),i=Et(r,s),o=Math.abs(Ea(r,s));if(o<1)return 0;r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-i*o);let c=Et(r,s)===-i;Ia(a)&&o===1&&Et(a,s)===1&&(c=!1);const d=i*(o-+c);return d===0?0:d}function ja(n,e,t){const a=Oa(n,e)/1e3;return Za(t==null?void 0:t.roundingMethod)(a)}function dn(n,e,t){const a=ga(),r=(t==null?void 0:t.locale)??a.locale??pa,s=2520,i=Et(n,e);if(isNaN(i))throw new RangeError("Invalid time value");const o=Object.assign({},t,{addSuffix:t==null?void 0:t.addSuffix,comparison:i}),[c,d]=tn(t==null?void 0:t.in,...i>0?[e,n]:[n,e]),l=ja(d,c),_=(on(d)-on(c))/1e3,b=Math.round((l-_)/60);let m;if(b<2)return t!=null&&t.includeSeconds?l<5?r.formatDistance("lessThanXSeconds",5,o):l<10?r.formatDistance("lessThanXSeconds",10,o):l<20?r.formatDistance("lessThanXSeconds",20,o):l<40?r.formatDistance("halfAMinute",0,o):l<60?r.formatDistance("lessThanXMinutes",1,o):r.formatDistance("xMinutes",1,o):b===0?r.formatDistance("lessThanXMinutes",1,o):r.formatDistance("xMinutes",b,o);if(b<45)return r.formatDistance("xMinutes",b,o);if(b<90)return r.formatDistance("aboutXHours",1,o);if(b<cn){const x=Math.round(b/60);return r.formatDistance("aboutXHours",x,o)}else{if(b<s)return r.formatDistance("xDays",1,o);if(b<St){const x=Math.round(b/cn);return r.formatDistance("xDays",x,o)}else if(b<St*2)return m=Math.round(b/St),r.formatDistance("aboutXMonths",m,o)}if(m=Ra(d,c),m<12){const x=Math.round(b/St);return r.formatDistance("xMonths",x,o)}else{const x=m%12,C=Math.trunc(m/12);return x<3?r.formatDistance("aboutXYears",C,o):x<9?r.formatDistance("overXYears",C,o):r.formatDistance("almostXYears",C+1,o)}}var Ma=P('<div><span class="svelte-cfxv0r"><!></span><span class="svelte-cfxv0r"><!></span><span class="svelte-cfxv0r"><!></span></div>');function Aa(n,e){he(e,!0);const t=B(e,"running",3,!0);var a=Ma();let r;var s=g(a);Ne(s,"animation-delay","0s");var i=g(s);{var o=O=>{var V=ye(),I=re(V);te(I,()=>e.children,()=>0),T(O,V)},c=O=>{var V=we("•");T(O,V)};U(i,O=>{e.children?O(o):O(c,!1)})}p(s);var d=j(s);Ne(d,"animation-delay","0.09s");var l=g(d);{var _=O=>{var V=ye(),I=re(V);te(I,()=>e.children,()=>1),T(O,V)},b=O=>{var V=we("•");T(O,V)};U(l,O=>{e.children?O(_):O(b,!1)})}p(d);var m=j(d);Ne(m,"animation-delay","0.3s");var x=g(m);{var C=O=>{var V=ye(),I=re(V);te(I,()=>e.children,()=>2),T(O,V)},N=O=>{var V=we("•");T(O,V)};U(x,O=>{e.children?O(C):O(N,!1)})}p(m),p(a),H(()=>{r=He(a,r,{...e.attrs},"svelte-cfxv0r"),qe(a,"pending_animation",!0),qe(a,"running",t())}),T(n,a),me()}var Da=P('<span class="animation svelte-cvss5b"><!></span>'),Pa=P('<button><span class="content svelte-cvss5b"><!></span> <!></button>');function Va(n,e){he(e,!0);let t=$t(void 0);const a=l=>{var _;return(_=f(t))==null?void 0:_.focus(l)};var r=Pa();let s;var i=g(r),o=g(i);te(o,()=>e.children),p(i);var c=j(i,2);{var d=l=>{var _=Da(),b=g(_);Aa(b,{get running(){return e.running}}),p(_),T(l,_)};U(c,l=>{e.pending&&l(d)})}return p(r),_a(r,l=>bn(t,l),()=>f(t)),H(()=>{s=He(r,s,{type:"button",...e.attrs,disabled:e.disabled??e.pending,title:e.title,onclick:e.onclick},"svelte-cvss5b"),qe(r,"pending",e.pending)}),T(n,r),me({focus:a})}const Yt=(n,e)=>{let t,a,r,s,i,o,c,d;const l=m=>{d=m,o=0,typeof m=="function"?(t=m,a=void 0,r=void 0,s=void 0):m&&(t=m.onintersect,a=m.ondisconnect,r=m.count,s=m.options),_()},_=()=>{c&&b(),!(d===null||r===0)&&(c=new IntersectionObserver(m=>{i=m[0].isIntersecting,t&&c&&t({intersecting:i,intersections:o,el:n,observer:c,disconnect:b}),i?o++:r&&r>0&&o>=r&&b()},s),c.observe(n))},b=()=>{c&&(c.disconnect(),a&&a({intersecting:i,intersections:o,el:n,observer:c}),c=null)};return l(e),{update:m=>{l(m)},destroy:b}};var La=P('<div class="content panel p_md mb_lg svelte-3mglbb"><!></div>'),za=P("<details><summary> </summary><!></details>"),Ua=P('<div class="mastodon_status_item svelte-3mglbb"><header class="svelte-3mglbb"><button type="button" class="avatar plain icon_button svelte-3mglbb"><img class="icon svelte-3mglbb"></button> <div class="names svelte-3mglbb"><div class="name svelte-3mglbb"><a> </a></div> <small class="svelte-3mglbb"> </small> <small class="date svelte-3mglbb"><a class="svelte-3mglbb"> </a></small></div></header> <!> <div class="content svelte-3mglbb"><!></div></div>');function Xt(n,e){he(e,!0);const t=E(()=>e.item.created_at),a=E(()=>e.item.edited_at),r=E(()=>e.item.content),s=E(()=>e.item.account),i=E(()=>e.item.url),o=E(()=>e.item.sensitive),c=E(()=>e.item.spoiler_text),d=E(()=>f(s).created_at),l=E(()=>f(s).avatar_static),_=E(()=>f(s).url),b=E(()=>f(s).display_name),m=E(()=>f(s).followers_count),x=E(()=>f(s).following_count),C=E(()=>f(s).acct),N=E(()=>f(s).note),O=E(()=>Wt(new Date(f(d)),"PPpp")),V=E(()=>dn(new Date,new Date(f(t)))),I=E(()=>f(a)?Wt(new Date(f(a)),"PPpp"):null),X=E(()=>f(a)?dn(new Date,new Date(f(a))):null),$=E(()=>Wt(new Date(f(d)),"MMM yyyy"));let L=$t(!1);const ne=()=>{bn(L,!f(L))};var W=Ua(),M=g(W),Y=g(M);Y.__click=function(...G){var q;(q=f(N)?ne:void 0)==null||q.apply(this,G)};var Oe=g(Y);p(Y);var Ae=j(Y,2),De=g(Ae),Pe=g(De);H(()=>ee(Pe,"title",ua(f(_),"https://")));var gt=g(Pe,!0);p(Pe),p(De);var oe=j(De,2),Fe=g(oe,!0);p(oe);var Ve=j(oe,2),Ke=g(Ve),Qe=g(Ke);p(Ke),p(Ve),p(Ae),p(M);var $e=j(M,2);{var At=G=>{var q=La(),ce=g(q);Bt(ce,()=>f(N),!1,!1),p(q),_e(3,q,()=>pe),T(G,q)};U($e,G=>{f(L)&&f(N)&&G(At)})}var yt=j($e,2),Dt=g(yt);{var Pt=G=>{var q=za(),ce=g(q),Le=g(ce,!0);p(ce);var bt=j(ce);Bt(bt,()=>f(r),!1,!1),p(q),H(()=>ge(Le,f(c)||"view sensitive content")),T(G,q)},Vt=G=>{var q=ye(),ce=re(q);Bt(ce,()=>f(r),!1,!1),T(G,q)};U(Dt,G=>{f(o)?G(Pt):G(Vt,!1)})}p(yt),p(W),H(()=>{ee(Y,"title",f(N)?`${f(L)?"hide":"show"} ${f(C)}'s profile`:void 0),Y.disabled=!f(N),ee(Y,"aria-label",f(N)?`${f(L)?"hide":"show"} ${f(C)}'s profile`:void 0),ee(Oe,"src",f(l)),ee(Oe,"alt",`avatar for ${f(C)??""}`),ee(Pe,"href",f(_)),ge(gt,f(b)),ee(oe,"title",`following ${f(x)??""}, ${f(m)??""} followers`),ge(Fe,f(C)),ee(Ve,"title",`posted ${f(O)??""}${(f(I)?`, edited ${f(I)}`:"")??""}, joined ${f($)??""}`),ee(Ke,"href",f(i)),ge(Qe,`${f(V)??""} ago${(f(X)?`, edited ${f(X)} ago`:"")??""}`)}),T(n,W),me()}gn(["click"]);var Ba=P('<li class="svelte-7gwsg1"><!> <!></li>'),Wa=P('<ul class="mastodon_status_tree unstyled svelte-7gwsg1"></ul>');function Tn(n,e){he(e,!0);const t=E(()=>e.item.id),a=E(()=>e.items.filter(o=>o.in_reply_to_id===f(t)));var r=ye(),s=re(r);{var i=o=>{var c=Wa();wn(c,21,()=>f(a),d=>d.id,(d,l)=>{var _=Ba(),b=g(_);Xt(b,{get item(){return f(l)}});var m=j(b,2);Tn(m,{get item(){return f(l)},get items(){return e.items}}),p(_),T(d,_)}),p(c),T(o,c)};U(s,o=>{f(a).length&&o(i)})}T(n,r),me()}var R;(function(n){n.assertEqual=r=>r;function e(r){}n.assertIs=e;function t(r){throw new Error}n.assertNever=t,n.arrayToEnum=r=>{const s={};for(const i of r)s[i]=i;return s},n.getValidEnumValues=r=>{const s=n.objectKeys(r).filter(o=>typeof r[r[o]]!="number"),i={};for(const o of s)i[o]=r[o];return n.objectValues(i)},n.objectValues=r=>n.objectKeys(r).map(function(s){return r[s]}),n.objectKeys=typeof Object.keys=="function"?r=>Object.keys(r):r=>{const s=[];for(const i in r)Object.prototype.hasOwnProperty.call(r,i)&&s.push(i);return s},n.find=(r,s)=>{for(const i of r)if(s(i))return i},n.isInteger=typeof Number.isInteger=="function"?r=>Number.isInteger(r):r=>typeof r=="number"&&isFinite(r)&&Math.floor(r)===r;function a(r,s=" | "){return r.map(i=>typeof i=="string"?`'${i}'`:i).join(s)}n.joinValues=a,n.jsonStringifyReplacer=(r,s)=>typeof s=="bigint"?s.toString():s})(R||(R={}));var Gt;(function(n){n.mergeShapes=(e,t)=>({...e,...t})})(Gt||(Gt={}));const v=R.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),ke=n=>{switch(typeof n){case"undefined":return v.undefined;case"string":return v.string;case"number":return isNaN(n)?v.nan:v.number;case"boolean":return v.boolean;case"function":return v.function;case"bigint":return v.bigint;case"symbol":return v.symbol;case"object":return Array.isArray(n)?v.array:n===null?v.null:n.then&&typeof n.then=="function"&&n.catch&&typeof n.catch=="function"?v.promise:typeof Map<"u"&&n instanceof Map?v.map:typeof Set<"u"&&n instanceof Set?v.set:typeof Date<"u"&&n instanceof Date?v.date:v.object;default:return v.unknown}},u=R.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Ya=n=>JSON.stringify(n,null,2).replace(/"([^"]+)":/g,"$1:");class Q extends Error{constructor(e){super(),this.issues=[],this.addIssue=a=>{this.issues=[...this.issues,a]},this.addIssues=(a=[])=>{this.issues=[...this.issues,...a]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const t=e||function(s){return s.message},a={_errors:[]},r=s=>{for(const i of s.issues)if(i.code==="invalid_union")i.unionErrors.map(r);else if(i.code==="invalid_return_type")r(i.returnTypeError);else if(i.code==="invalid_arguments")r(i.argumentsError);else if(i.path.length===0)a._errors.push(t(i));else{let o=a,c=0;for(;c<i.path.length;){const d=i.path[c];c===i.path.length-1?(o[d]=o[d]||{_errors:[]},o[d]._errors.push(t(i))):o[d]=o[d]||{_errors:[]},o=o[d],c++}}};return r(this),a}static assert(e){if(!(e instanceof Q))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,R.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},a=[];for(const r of this.issues)r.path.length>0?(t[r.path[0]]=t[r.path[0]]||[],t[r.path[0]].push(e(r))):a.push(e(r));return{formErrors:a,fieldErrors:t}}get formErrors(){return this.flatten()}}Q.create=n=>new Q(n);const Je=(n,e)=>{let t;switch(n.code){case u.invalid_type:n.received===v.undefined?t="Required":t=`Expected ${n.expected}, received ${n.received}`;break;case u.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(n.expected,R.jsonStringifyReplacer)}`;break;case u.unrecognized_keys:t=`Unrecognized key(s) in object: ${R.joinValues(n.keys,", ")}`;break;case u.invalid_union:t="Invalid input";break;case u.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${R.joinValues(n.options)}`;break;case u.invalid_enum_value:t=`Invalid enum value. Expected ${R.joinValues(n.options)}, received '${n.received}'`;break;case u.invalid_arguments:t="Invalid function arguments";break;case u.invalid_return_type:t="Invalid function return type";break;case u.invalid_date:t="Invalid date";break;case u.invalid_string:typeof n.validation=="object"?"includes"in n.validation?(t=`Invalid input: must include "${n.validation.includes}"`,typeof n.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${n.validation.position}`)):"startsWith"in n.validation?t=`Invalid input: must start with "${n.validation.startsWith}"`:"endsWith"in n.validation?t=`Invalid input: must end with "${n.validation.endsWith}"`:R.assertNever(n.validation):n.validation!=="regex"?t=`Invalid ${n.validation}`:t="Invalid";break;case u.too_small:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at least":"more than"} ${n.minimum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at least":"over"} ${n.minimum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${n.minimum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(n.minimum))}`:t="Invalid input";break;case u.too_big:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at most":"less than"} ${n.maximum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at most":"under"} ${n.maximum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="bigint"?t=`BigInt must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly":n.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(n.maximum))}`:t="Invalid input";break;case u.custom:t="Invalid input";break;case u.invalid_intersection_types:t="Intersection results could not be merged";break;case u.not_multiple_of:t=`Number must be a multiple of ${n.multipleOf}`;break;case u.not_finite:t="Number must be finite";break;default:t=e.defaultError,R.assertNever(n)}return{message:t}};let Sn=Je;function Ha(n){Sn=n}function Zt(){return Sn}const Ot=n=>{const{data:e,path:t,errorMaps:a,issueData:r}=n,s=[...t,...r.path||[]],i={...r,path:s};if(r.message!==void 0)return{...r,path:s,message:r.message};let o="";const c=a.filter(d=>!!d).slice().reverse();for(const d of c)o=d(i,{data:e,defaultError:o}).message;return{...r,path:s,message:o}},qa=[];function h(n,e){const t=Zt(),a=Ot({issueData:e,data:n.data,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,t,t===Je?void 0:Je].filter(r=>!!r)});n.common.issues.push(a)}class J{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const a=[];for(const r of t){if(r.status==="aborted")return w;r.status==="dirty"&&e.dirty(),a.push(r.value)}return{status:e.value,value:a}}static async mergeObjectAsync(e,t){const a=[];for(const r of t){const s=await r.key,i=await r.value;a.push({key:s,value:i})}return J.mergeObjectSync(e,a)}static mergeObjectSync(e,t){const a={};for(const r of t){const{key:s,value:i}=r;if(s.status==="aborted"||i.status==="aborted")return w;s.status==="dirty"&&e.dirty(),i.status==="dirty"&&e.dirty(),s.value!=="__proto__"&&(typeof i.value<"u"||r.alwaysSet)&&(a[s.value]=i.value)}return{status:e.value,value:a}}}const w=Object.freeze({status:"aborted"}),We=n=>({status:"dirty",value:n}),K=n=>({status:"valid",value:n}),Ft=n=>n.status==="aborted",Kt=n=>n.status==="dirty",at=n=>n.status==="valid",rt=n=>typeof Promise<"u"&&n instanceof Promise;function Ct(n,e,t,a){if(t==="a"&&!a)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!a:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?a:t==="a"?a.call(n):a?a.value:e.get(n)}function En(n,e,t,a,r){if(a==="m")throw new TypeError("Private method is not writable");if(a==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return a==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t}var y;(function(n){n.errToObj=e=>typeof e=="string"?{message:e}:e||{},n.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(y||(y={}));var tt,nt;class ue{constructor(e,t,a,r){this._cachedPath=[],this.parent=e,this.data=t,this._path=a,this._key=r}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const ln=(n,e)=>{if(at(e))return{success:!0,data:e.value};if(!n.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new Q(n.common.issues);return this._error=t,this._error}}};function S(n){if(!n)return{};const{errorMap:e,invalid_type_error:t,required_error:a,description:r}=n;if(e&&(t||a))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:r}:{errorMap:(i,o)=>{var c,d;const{message:l}=n;return i.code==="invalid_enum_value"?{message:l??o.defaultError}:typeof o.data>"u"?{message:(c=l??a)!==null&&c!==void 0?c:o.defaultError}:i.code!=="invalid_type"?{message:o.defaultError}:{message:(d=l??t)!==null&&d!==void 0?d:o.defaultError}},description:r}}class Z{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return ke(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:ke(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new J,ctx:{common:e.parent.common,data:e.data,parsedType:ke(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(rt(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const a=this.safeParse(e,t);if(a.success)return a.data;throw a.error}safeParse(e,t){var a;const r={common:{issues:[],async:(a=t==null?void 0:t.async)!==null&&a!==void 0?a:!1,contextualErrorMap:t==null?void 0:t.errorMap},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ke(e)},s=this._parseSync({data:e,path:r.path,parent:r});return ln(r,s)}async parseAsync(e,t){const a=await this.safeParseAsync(e,t);if(a.success)return a.data;throw a.error}async safeParseAsync(e,t){const a={common:{issues:[],contextualErrorMap:t==null?void 0:t.errorMap,async:!0},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ke(e)},r=this._parse({data:e,path:a.path,parent:a}),s=await(rt(r)?r:Promise.resolve(r));return ln(a,s)}refine(e,t){const a=r=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(r):t;return this._refinement((r,s)=>{const i=e(r),o=()=>s.addIssue({code:u.custom,...a(r)});return typeof Promise<"u"&&i instanceof Promise?i.then(c=>c?!0:(o(),!1)):i?!0:(o(),!1)})}refinement(e,t){return this._refinement((a,r)=>e(a)?!0:(r.addIssue(typeof t=="function"?t(a,r):t),!1))}_refinement(e){return new ie({schema:this,typeName:k.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return le.create(this,this._def)}nullable(){return Ze.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return se.create(this,this._def)}promise(){return Ge.create(this,this._def)}or(e){return ct.create([this,e],this._def)}and(e){return dt.create(this,e,this._def)}transform(e){return new ie({...S(this._def),schema:this,typeName:k.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new mt({...S(this._def),innerType:this,defaultValue:t,typeName:k.ZodDefault})}brand(){return new nn({typeName:k.ZodBranded,type:this,...S(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new vt({...S(this._def),innerType:this,catchValue:t,typeName:k.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return pt.create(this,e)}readonly(){return _t.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Ja=/^c[^\s-]{8,}$/i,Xa=/^[0-9a-z]+$/,Ga=/^[0-9A-HJKMNP-TV-Z]{26}$/,Fa=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Ka=/^[a-z0-9_-]{21}$/i,Qa=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,$a=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,er="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Ht;const tr=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,nr=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ar=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Zn="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",rr=new RegExp(`^${Zn}$`);function On(n){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return n.precision?e=`${e}\\.\\d{${n.precision}}`:n.precision==null&&(e=`${e}(\\.\\d+)?`),e}function sr(n){return new RegExp(`^${On(n)}$`)}function Cn(n){let e=`${Zn}T${On(n)}`;const t=[];return t.push(n.local?"Z?":"Z"),n.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function ir(n,e){return!!((e==="v4"||!e)&&tr.test(n)||(e==="v6"||!e)&&nr.test(n))}class ae extends Z{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==v.string){const s=this._getOrReturnCtx(e);return h(s,{code:u.invalid_type,expected:v.string,received:s.parsedType}),w}const a=new J;let r;for(const s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(r=this._getOrReturnCtx(e,r),h(r,{code:u.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),a.dirty());else if(s.kind==="max")e.data.length>s.value&&(r=this._getOrReturnCtx(e,r),h(r,{code:u.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),a.dirty());else if(s.kind==="length"){const i=e.data.length>s.value,o=e.data.length<s.value;(i||o)&&(r=this._getOrReturnCtx(e,r),i?h(r,{code:u.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):o&&h(r,{code:u.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),a.dirty())}else if(s.kind==="email")$a.test(e.data)||(r=this._getOrReturnCtx(e,r),h(r,{validation:"email",code:u.invalid_string,message:s.message}),a.dirty());else if(s.kind==="emoji")Ht||(Ht=new RegExp(er,"u")),Ht.test(e.data)||(r=this._getOrReturnCtx(e,r),h(r,{validation:"emoji",code:u.invalid_string,message:s.message}),a.dirty());else if(s.kind==="uuid")Fa.test(e.data)||(r=this._getOrReturnCtx(e,r),h(r,{validation:"uuid",code:u.invalid_string,message:s.message}),a.dirty());else if(s.kind==="nanoid")Ka.test(e.data)||(r=this._getOrReturnCtx(e,r),h(r,{validation:"nanoid",code:u.invalid_string,message:s.message}),a.dirty());else if(s.kind==="cuid")Ja.test(e.data)||(r=this._getOrReturnCtx(e,r),h(r,{validation:"cuid",code:u.invalid_string,message:s.message}),a.dirty());else if(s.kind==="cuid2")Xa.test(e.data)||(r=this._getOrReturnCtx(e,r),h(r,{validation:"cuid2",code:u.invalid_string,message:s.message}),a.dirty());else if(s.kind==="ulid")Ga.test(e.data)||(r=this._getOrReturnCtx(e,r),h(r,{validation:"ulid",code:u.invalid_string,message:s.message}),a.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{r=this._getOrReturnCtx(e,r),h(r,{validation:"url",code:u.invalid_string,message:s.message}),a.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(r=this._getOrReturnCtx(e,r),h(r,{validation:"regex",code:u.invalid_string,message:s.message}),a.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(r=this._getOrReturnCtx(e,r),h(r,{code:u.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),a.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(r=this._getOrReturnCtx(e,r),h(r,{code:u.invalid_string,validation:{startsWith:s.value},message:s.message}),a.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(r=this._getOrReturnCtx(e,r),h(r,{code:u.invalid_string,validation:{endsWith:s.value},message:s.message}),a.dirty()):s.kind==="datetime"?Cn(s).test(e.data)||(r=this._getOrReturnCtx(e,r),h(r,{code:u.invalid_string,validation:"datetime",message:s.message}),a.dirty()):s.kind==="date"?rr.test(e.data)||(r=this._getOrReturnCtx(e,r),h(r,{code:u.invalid_string,validation:"date",message:s.message}),a.dirty()):s.kind==="time"?sr(s).test(e.data)||(r=this._getOrReturnCtx(e,r),h(r,{code:u.invalid_string,validation:"time",message:s.message}),a.dirty()):s.kind==="duration"?Qa.test(e.data)||(r=this._getOrReturnCtx(e,r),h(r,{validation:"duration",code:u.invalid_string,message:s.message}),a.dirty()):s.kind==="ip"?ir(e.data,s.version)||(r=this._getOrReturnCtx(e,r),h(r,{validation:"ip",code:u.invalid_string,message:s.message}),a.dirty()):s.kind==="base64"?ar.test(e.data)||(r=this._getOrReturnCtx(e,r),h(r,{validation:"base64",code:u.invalid_string,message:s.message}),a.dirty()):R.assertNever(s);return{status:a.value,value:e.data}}_regex(e,t,a){return this.refinement(r=>e.test(r),{validation:t,code:u.invalid_string,...y.errToObj(a)})}_addCheck(e){return new ae({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...y.errToObj(e)})}url(e){return this._addCheck({kind:"url",...y.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...y.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...y.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...y.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...y.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...y.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...y.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...y.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...y.errToObj(e)})}datetime(e){var t,a;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(t=e==null?void 0:e.offset)!==null&&t!==void 0?t:!1,local:(a=e==null?void 0:e.local)!==null&&a!==void 0?a:!1,...y.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...y.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...y.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...y.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t==null?void 0:t.position,...y.errToObj(t==null?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...y.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...y.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...y.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...y.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...y.errToObj(t)})}nonempty(e){return this.min(1,y.errToObj(e))}trim(){return new ae({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ae({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ae({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}ae.create=n=>{var e;return new ae({checks:[],typeName:k.ZodString,coerce:(e=n==null?void 0:n.coerce)!==null&&e!==void 0?e:!1,...S(n)})};function or(n,e){const t=(n.toString().split(".")[1]||"").length,a=(e.toString().split(".")[1]||"").length,r=t>a?t:a,s=parseInt(n.toFixed(r).replace(".","")),i=parseInt(e.toFixed(r).replace(".",""));return s%i/Math.pow(10,r)}class Te extends Z{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==v.number){const s=this._getOrReturnCtx(e);return h(s,{code:u.invalid_type,expected:v.number,received:s.parsedType}),w}let a;const r=new J;for(const s of this._def.checks)s.kind==="int"?R.isInteger(e.data)||(a=this._getOrReturnCtx(e,a),h(a,{code:u.invalid_type,expected:"integer",received:"float",message:s.message}),r.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(a=this._getOrReturnCtx(e,a),h(a,{code:u.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),r.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(a=this._getOrReturnCtx(e,a),h(a,{code:u.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),r.dirty()):s.kind==="multipleOf"?or(e.data,s.value)!==0&&(a=this._getOrReturnCtx(e,a),h(a,{code:u.not_multiple_of,multipleOf:s.value,message:s.message}),r.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(a=this._getOrReturnCtx(e,a),h(a,{code:u.not_finite,message:s.message}),r.dirty()):R.assertNever(s);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,y.toString(t))}gt(e,t){return this.setLimit("min",e,!1,y.toString(t))}lte(e,t){return this.setLimit("max",e,!0,y.toString(t))}lt(e,t){return this.setLimit("max",e,!1,y.toString(t))}setLimit(e,t,a,r){return new Te({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:a,message:y.toString(r)}]})}_addCheck(e){return new Te({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:y.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:y.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:y.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:y.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:y.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:y.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:y.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:y.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:y.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&R.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const a of this._def.checks){if(a.kind==="finite"||a.kind==="int"||a.kind==="multipleOf")return!0;a.kind==="min"?(t===null||a.value>t)&&(t=a.value):a.kind==="max"&&(e===null||a.value<e)&&(e=a.value)}return Number.isFinite(t)&&Number.isFinite(e)}}Te.create=n=>new Te({checks:[],typeName:k.ZodNumber,coerce:(n==null?void 0:n.coerce)||!1,...S(n)});class Se extends Z{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==v.bigint){const s=this._getOrReturnCtx(e);return h(s,{code:u.invalid_type,expected:v.bigint,received:s.parsedType}),w}let a;const r=new J;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(a=this._getOrReturnCtx(e,a),h(a,{code:u.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),r.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(a=this._getOrReturnCtx(e,a),h(a,{code:u.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),r.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(a=this._getOrReturnCtx(e,a),h(a,{code:u.not_multiple_of,multipleOf:s.value,message:s.message}),r.dirty()):R.assertNever(s);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,y.toString(t))}gt(e,t){return this.setLimit("min",e,!1,y.toString(t))}lte(e,t){return this.setLimit("max",e,!0,y.toString(t))}lt(e,t){return this.setLimit("max",e,!1,y.toString(t))}setLimit(e,t,a,r){return new Se({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:a,message:y.toString(r)}]})}_addCheck(e){return new Se({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:y.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:y.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:y.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:y.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:y.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}Se.create=n=>{var e;return new Se({checks:[],typeName:k.ZodBigInt,coerce:(e=n==null?void 0:n.coerce)!==null&&e!==void 0?e:!1,...S(n)})};class st extends Z{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==v.boolean){const a=this._getOrReturnCtx(e);return h(a,{code:u.invalid_type,expected:v.boolean,received:a.parsedType}),w}return K(e.data)}}st.create=n=>new st({typeName:k.ZodBoolean,coerce:(n==null?void 0:n.coerce)||!1,...S(n)});class je extends Z{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==v.date){const s=this._getOrReturnCtx(e);return h(s,{code:u.invalid_type,expected:v.date,received:s.parsedType}),w}if(isNaN(e.data.getTime())){const s=this._getOrReturnCtx(e);return h(s,{code:u.invalid_date}),w}const a=new J;let r;for(const s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(r=this._getOrReturnCtx(e,r),h(r,{code:u.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),a.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(r=this._getOrReturnCtx(e,r),h(r,{code:u.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),a.dirty()):R.assertNever(s);return{status:a.value,value:new Date(e.data.getTime())}}_addCheck(e){return new je({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:y.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:y.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}je.create=n=>new je({checks:[],coerce:(n==null?void 0:n.coerce)||!1,typeName:k.ZodDate,...S(n)});class Nt extends Z{_parse(e){if(this._getType(e)!==v.symbol){const a=this._getOrReturnCtx(e);return h(a,{code:u.invalid_type,expected:v.symbol,received:a.parsedType}),w}return K(e.data)}}Nt.create=n=>new Nt({typeName:k.ZodSymbol,...S(n)});class it extends Z{_parse(e){if(this._getType(e)!==v.undefined){const a=this._getOrReturnCtx(e);return h(a,{code:u.invalid_type,expected:v.undefined,received:a.parsedType}),w}return K(e.data)}}it.create=n=>new it({typeName:k.ZodUndefined,...S(n)});class ot extends Z{_parse(e){if(this._getType(e)!==v.null){const a=this._getOrReturnCtx(e);return h(a,{code:u.invalid_type,expected:v.null,received:a.parsedType}),w}return K(e.data)}}ot.create=n=>new ot({typeName:k.ZodNull,...S(n)});class Xe extends Z{constructor(){super(...arguments),this._any=!0}_parse(e){return K(e.data)}}Xe.create=n=>new Xe({typeName:k.ZodAny,...S(n)});class Ie extends Z{constructor(){super(...arguments),this._unknown=!0}_parse(e){return K(e.data)}}Ie.create=n=>new Ie({typeName:k.ZodUnknown,...S(n)});class be extends Z{_parse(e){const t=this._getOrReturnCtx(e);return h(t,{code:u.invalid_type,expected:v.never,received:t.parsedType}),w}}be.create=n=>new be({typeName:k.ZodNever,...S(n)});class It extends Z{_parse(e){if(this._getType(e)!==v.undefined){const a=this._getOrReturnCtx(e);return h(a,{code:u.invalid_type,expected:v.void,received:a.parsedType}),w}return K(e.data)}}It.create=n=>new It({typeName:k.ZodVoid,...S(n)});class se extends Z{_parse(e){const{ctx:t,status:a}=this._processInputParams(e),r=this._def;if(t.parsedType!==v.array)return h(t,{code:u.invalid_type,expected:v.array,received:t.parsedType}),w;if(r.exactLength!==null){const i=t.data.length>r.exactLength.value,o=t.data.length<r.exactLength.value;(i||o)&&(h(t,{code:i?u.too_big:u.too_small,minimum:o?r.exactLength.value:void 0,maximum:i?r.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:r.exactLength.message}),a.dirty())}if(r.minLength!==null&&t.data.length<r.minLength.value&&(h(t,{code:u.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,exact:!1,message:r.minLength.message}),a.dirty()),r.maxLength!==null&&t.data.length>r.maxLength.value&&(h(t,{code:u.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,exact:!1,message:r.maxLength.message}),a.dirty()),t.common.async)return Promise.all([...t.data].map((i,o)=>r.type._parseAsync(new ue(t,i,t.path,o)))).then(i=>J.mergeArray(a,i));const s=[...t.data].map((i,o)=>r.type._parseSync(new ue(t,i,t.path,o)));return J.mergeArray(a,s)}get element(){return this._def.type}min(e,t){return new se({...this._def,minLength:{value:e,message:y.toString(t)}})}max(e,t){return new se({...this._def,maxLength:{value:e,message:y.toString(t)}})}length(e,t){return new se({...this._def,exactLength:{value:e,message:y.toString(t)}})}nonempty(e){return this.min(1,e)}}se.create=(n,e)=>new se({type:n,minLength:null,maxLength:null,exactLength:null,typeName:k.ZodArray,...S(e)});function Be(n){if(n instanceof z){const e={};for(const t in n.shape){const a=n.shape[t];e[t]=le.create(Be(a))}return new z({...n._def,shape:()=>e})}else return n instanceof se?new se({...n._def,type:Be(n.element)}):n instanceof le?le.create(Be(n.unwrap())):n instanceof Ze?Ze.create(Be(n.unwrap())):n instanceof fe?fe.create(n.items.map(e=>Be(e))):n}class z extends Z{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=R.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==v.object){const d=this._getOrReturnCtx(e);return h(d,{code:u.invalid_type,expected:v.object,received:d.parsedType}),w}const{status:a,ctx:r}=this._processInputParams(e),{shape:s,keys:i}=this._getCached(),o=[];if(!(this._def.catchall instanceof be&&this._def.unknownKeys==="strip"))for(const d in r.data)i.includes(d)||o.push(d);const c=[];for(const d of i){const l=s[d],_=r.data[d];c.push({key:{status:"valid",value:d},value:l._parse(new ue(r,_,r.path,d)),alwaysSet:d in r.data})}if(this._def.catchall instanceof be){const d=this._def.unknownKeys;if(d==="passthrough")for(const l of o)c.push({key:{status:"valid",value:l},value:{status:"valid",value:r.data[l]}});else if(d==="strict")o.length>0&&(h(r,{code:u.unrecognized_keys,keys:o}),a.dirty());else if(d!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const d=this._def.catchall;for(const l of o){const _=r.data[l];c.push({key:{status:"valid",value:l},value:d._parse(new ue(r,_,r.path,l)),alwaysSet:l in r.data})}}return r.common.async?Promise.resolve().then(async()=>{const d=[];for(const l of c){const _=await l.key,b=await l.value;d.push({key:_,value:b,alwaysSet:l.alwaysSet})}return d}).then(d=>J.mergeObjectSync(a,d)):J.mergeObjectSync(a,c)}get shape(){return this._def.shape()}strict(e){return y.errToObj,new z({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,a)=>{var r,s,i,o;const c=(i=(s=(r=this._def).errorMap)===null||s===void 0?void 0:s.call(r,t,a).message)!==null&&i!==void 0?i:a.defaultError;return t.code==="unrecognized_keys"?{message:(o=y.errToObj(e).message)!==null&&o!==void 0?o:c}:{message:c}}}:{}})}strip(){return new z({...this._def,unknownKeys:"strip"})}passthrough(){return new z({...this._def,unknownKeys:"passthrough"})}extend(e){return new z({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new z({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:k.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new z({...this._def,catchall:e})}pick(e){const t={};return R.objectKeys(e).forEach(a=>{e[a]&&this.shape[a]&&(t[a]=this.shape[a])}),new z({...this._def,shape:()=>t})}omit(e){const t={};return R.objectKeys(this.shape).forEach(a=>{e[a]||(t[a]=this.shape[a])}),new z({...this._def,shape:()=>t})}deepPartial(){return Be(this)}partial(e){const t={};return R.objectKeys(this.shape).forEach(a=>{const r=this.shape[a];e&&!e[a]?t[a]=r:t[a]=r.optional()}),new z({...this._def,shape:()=>t})}required(e){const t={};return R.objectKeys(this.shape).forEach(a=>{if(e&&!e[a])t[a]=this.shape[a];else{let s=this.shape[a];for(;s instanceof le;)s=s._def.innerType;t[a]=s}}),new z({...this._def,shape:()=>t})}keyof(){return Nn(R.objectKeys(this.shape))}}z.create=(n,e)=>new z({shape:()=>n,unknownKeys:"strip",catchall:be.create(),typeName:k.ZodObject,...S(e)});z.strictCreate=(n,e)=>new z({shape:()=>n,unknownKeys:"strict",catchall:be.create(),typeName:k.ZodObject,...S(e)});z.lazycreate=(n,e)=>new z({shape:n,unknownKeys:"strip",catchall:be.create(),typeName:k.ZodObject,...S(e)});class ct extends Z{_parse(e){const{ctx:t}=this._processInputParams(e),a=this._def.options;function r(s){for(const o of s)if(o.result.status==="valid")return o.result;for(const o of s)if(o.result.status==="dirty")return t.common.issues.push(...o.ctx.common.issues),o.result;const i=s.map(o=>new Q(o.ctx.common.issues));return h(t,{code:u.invalid_union,unionErrors:i}),w}if(t.common.async)return Promise.all(a.map(async s=>{const i={...t,common:{...t.common,issues:[]},parent:null};return{result:await s._parseAsync({data:t.data,path:t.path,parent:i}),ctx:i}})).then(r);{let s;const i=[];for(const c of a){const d={...t,common:{...t.common,issues:[]},parent:null},l=c._parseSync({data:t.data,path:t.path,parent:d});if(l.status==="valid")return l;l.status==="dirty"&&!s&&(s={result:l,ctx:d}),d.common.issues.length&&i.push(d.common.issues)}if(s)return t.common.issues.push(...s.ctx.common.issues),s.result;const o=i.map(c=>new Q(c));return h(t,{code:u.invalid_union,unionErrors:o}),w}}get options(){return this._def.options}}ct.create=(n,e)=>new ct({options:n,typeName:k.ZodUnion,...S(e)});const ve=n=>n instanceof ut?ve(n.schema):n instanceof ie?ve(n.innerType()):n instanceof ft?[n.value]:n instanceof Ee?n.options:n instanceof ht?R.objectValues(n.enum):n instanceof mt?ve(n._def.innerType):n instanceof it?[void 0]:n instanceof ot?[null]:n instanceof le?[void 0,...ve(n.unwrap())]:n instanceof Ze?[null,...ve(n.unwrap())]:n instanceof nn||n instanceof _t?ve(n.unwrap()):n instanceof vt?ve(n._def.innerType):[];class Mt extends Z{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==v.object)return h(t,{code:u.invalid_type,expected:v.object,received:t.parsedType}),w;const a=this.discriminator,r=t.data[a],s=this.optionsMap.get(r);return s?t.common.async?s._parseAsync({data:t.data,path:t.path,parent:t}):s._parseSync({data:t.data,path:t.path,parent:t}):(h(t,{code:u.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[a]}),w)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,a){const r=new Map;for(const s of t){const i=ve(s.shape[e]);if(!i.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const o of i){if(r.has(o))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(o)}`);r.set(o,s)}}return new Mt({typeName:k.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:r,...S(a)})}}function Qt(n,e){const t=ke(n),a=ke(e);if(n===e)return{valid:!0,data:n};if(t===v.object&&a===v.object){const r=R.objectKeys(e),s=R.objectKeys(n).filter(o=>r.indexOf(o)!==-1),i={...n,...e};for(const o of s){const c=Qt(n[o],e[o]);if(!c.valid)return{valid:!1};i[o]=c.data}return{valid:!0,data:i}}else if(t===v.array&&a===v.array){if(n.length!==e.length)return{valid:!1};const r=[];for(let s=0;s<n.length;s++){const i=n[s],o=e[s],c=Qt(i,o);if(!c.valid)return{valid:!1};r.push(c.data)}return{valid:!0,data:r}}else return t===v.date&&a===v.date&&+n==+e?{valid:!0,data:n}:{valid:!1}}class dt extends Z{_parse(e){const{status:t,ctx:a}=this._processInputParams(e),r=(s,i)=>{if(Ft(s)||Ft(i))return w;const o=Qt(s.value,i.value);return o.valid?((Kt(s)||Kt(i))&&t.dirty(),{status:t.value,value:o.data}):(h(a,{code:u.invalid_intersection_types}),w)};return a.common.async?Promise.all([this._def.left._parseAsync({data:a.data,path:a.path,parent:a}),this._def.right._parseAsync({data:a.data,path:a.path,parent:a})]).then(([s,i])=>r(s,i)):r(this._def.left._parseSync({data:a.data,path:a.path,parent:a}),this._def.right._parseSync({data:a.data,path:a.path,parent:a}))}}dt.create=(n,e,t)=>new dt({left:n,right:e,typeName:k.ZodIntersection,...S(t)});class fe extends Z{_parse(e){const{status:t,ctx:a}=this._processInputParams(e);if(a.parsedType!==v.array)return h(a,{code:u.invalid_type,expected:v.array,received:a.parsedType}),w;if(a.data.length<this._def.items.length)return h(a,{code:u.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),w;!this._def.rest&&a.data.length>this._def.items.length&&(h(a,{code:u.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const s=[...a.data].map((i,o)=>{const c=this._def.items[o]||this._def.rest;return c?c._parse(new ue(a,i,a.path,o)):null}).filter(i=>!!i);return a.common.async?Promise.all(s).then(i=>J.mergeArray(t,i)):J.mergeArray(t,s)}get items(){return this._def.items}rest(e){return new fe({...this._def,rest:e})}}fe.create=(n,e)=>{if(!Array.isArray(n))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new fe({items:n,typeName:k.ZodTuple,rest:null,...S(e)})};class lt extends Z{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:a}=this._processInputParams(e);if(a.parsedType!==v.object)return h(a,{code:u.invalid_type,expected:v.object,received:a.parsedType}),w;const r=[],s=this._def.keyType,i=this._def.valueType;for(const o in a.data)r.push({key:s._parse(new ue(a,o,a.path,o)),value:i._parse(new ue(a,a.data[o],a.path,o)),alwaysSet:o in a.data});return a.common.async?J.mergeObjectAsync(t,r):J.mergeObjectSync(t,r)}get element(){return this._def.valueType}static create(e,t,a){return t instanceof Z?new lt({keyType:e,valueType:t,typeName:k.ZodRecord,...S(a)}):new lt({keyType:ae.create(),valueType:e,typeName:k.ZodRecord,...S(t)})}}class Rt extends Z{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:a}=this._processInputParams(e);if(a.parsedType!==v.map)return h(a,{code:u.invalid_type,expected:v.map,received:a.parsedType}),w;const r=this._def.keyType,s=this._def.valueType,i=[...a.data.entries()].map(([o,c],d)=>({key:r._parse(new ue(a,o,a.path,[d,"key"])),value:s._parse(new ue(a,c,a.path,[d,"value"]))}));if(a.common.async){const o=new Map;return Promise.resolve().then(async()=>{for(const c of i){const d=await c.key,l=await c.value;if(d.status==="aborted"||l.status==="aborted")return w;(d.status==="dirty"||l.status==="dirty")&&t.dirty(),o.set(d.value,l.value)}return{status:t.value,value:o}})}else{const o=new Map;for(const c of i){const d=c.key,l=c.value;if(d.status==="aborted"||l.status==="aborted")return w;(d.status==="dirty"||l.status==="dirty")&&t.dirty(),o.set(d.value,l.value)}return{status:t.value,value:o}}}}Rt.create=(n,e,t)=>new Rt({valueType:e,keyType:n,typeName:k.ZodMap,...S(t)});class Me extends Z{_parse(e){const{status:t,ctx:a}=this._processInputParams(e);if(a.parsedType!==v.set)return h(a,{code:u.invalid_type,expected:v.set,received:a.parsedType}),w;const r=this._def;r.minSize!==null&&a.data.size<r.minSize.value&&(h(a,{code:u.too_small,minimum:r.minSize.value,type:"set",inclusive:!0,exact:!1,message:r.minSize.message}),t.dirty()),r.maxSize!==null&&a.data.size>r.maxSize.value&&(h(a,{code:u.too_big,maximum:r.maxSize.value,type:"set",inclusive:!0,exact:!1,message:r.maxSize.message}),t.dirty());const s=this._def.valueType;function i(c){const d=new Set;for(const l of c){if(l.status==="aborted")return w;l.status==="dirty"&&t.dirty(),d.add(l.value)}return{status:t.value,value:d}}const o=[...a.data.values()].map((c,d)=>s._parse(new ue(a,c,a.path,d)));return a.common.async?Promise.all(o).then(c=>i(c)):i(o)}min(e,t){return new Me({...this._def,minSize:{value:e,message:y.toString(t)}})}max(e,t){return new Me({...this._def,maxSize:{value:e,message:y.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}Me.create=(n,e)=>new Me({valueType:n,minSize:null,maxSize:null,typeName:k.ZodSet,...S(e)});class Ye extends Z{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==v.function)return h(t,{code:u.invalid_type,expected:v.function,received:t.parsedType}),w;function a(o,c){return Ot({data:o,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Zt(),Je].filter(d=>!!d),issueData:{code:u.invalid_arguments,argumentsError:c}})}function r(o,c){return Ot({data:o,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Zt(),Je].filter(d=>!!d),issueData:{code:u.invalid_return_type,returnTypeError:c}})}const s={errorMap:t.common.contextualErrorMap},i=t.data;if(this._def.returns instanceof Ge){const o=this;return K(async function(...c){const d=new Q([]),l=await o._def.args.parseAsync(c,s).catch(m=>{throw d.addIssue(a(c,m)),d}),_=await Reflect.apply(i,this,l);return await o._def.returns._def.type.parseAsync(_,s).catch(m=>{throw d.addIssue(r(_,m)),d})})}else{const o=this;return K(function(...c){const d=o._def.args.safeParse(c,s);if(!d.success)throw new Q([a(c,d.error)]);const l=Reflect.apply(i,this,d.data),_=o._def.returns.safeParse(l,s);if(!_.success)throw new Q([r(l,_.error)]);return _.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Ye({...this._def,args:fe.create(e).rest(Ie.create())})}returns(e){return new Ye({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,a){return new Ye({args:e||fe.create([]).rest(Ie.create()),returns:t||Ie.create(),typeName:k.ZodFunction,...S(a)})}}class ut extends Z{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}ut.create=(n,e)=>new ut({getter:n,typeName:k.ZodLazy,...S(e)});class ft extends Z{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return h(t,{received:t.data,code:u.invalid_literal,expected:this._def.value}),w}return{status:"valid",value:e.data}}get value(){return this._def.value}}ft.create=(n,e)=>new ft({value:n,typeName:k.ZodLiteral,...S(e)});function Nn(n,e){return new Ee({values:n,typeName:k.ZodEnum,...S(e)})}class Ee extends Z{constructor(){super(...arguments),tt.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),a=this._def.values;return h(t,{expected:R.joinValues(a),received:t.parsedType,code:u.invalid_type}),w}if(Ct(this,tt,"f")||En(this,tt,new Set(this._def.values),"f"),!Ct(this,tt,"f").has(e.data)){const t=this._getOrReturnCtx(e),a=this._def.values;return h(t,{received:t.data,code:u.invalid_enum_value,options:a}),w}return K(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return Ee.create(e,{...this._def,...t})}exclude(e,t=this._def){return Ee.create(this.options.filter(a=>!e.includes(a)),{...this._def,...t})}}tt=new WeakMap;Ee.create=Nn;class ht extends Z{constructor(){super(...arguments),nt.set(this,void 0)}_parse(e){const t=R.getValidEnumValues(this._def.values),a=this._getOrReturnCtx(e);if(a.parsedType!==v.string&&a.parsedType!==v.number){const r=R.objectValues(t);return h(a,{expected:R.joinValues(r),received:a.parsedType,code:u.invalid_type}),w}if(Ct(this,nt,"f")||En(this,nt,new Set(R.getValidEnumValues(this._def.values)),"f"),!Ct(this,nt,"f").has(e.data)){const r=R.objectValues(t);return h(a,{received:a.data,code:u.invalid_enum_value,options:r}),w}return K(e.data)}get enum(){return this._def.values}}nt=new WeakMap;ht.create=(n,e)=>new ht({values:n,typeName:k.ZodNativeEnum,...S(e)});class Ge extends Z{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==v.promise&&t.common.async===!1)return h(t,{code:u.invalid_type,expected:v.promise,received:t.parsedType}),w;const a=t.parsedType===v.promise?t.data:Promise.resolve(t.data);return K(a.then(r=>this._def.type.parseAsync(r,{path:t.path,errorMap:t.common.contextualErrorMap})))}}Ge.create=(n,e)=>new Ge({type:n,typeName:k.ZodPromise,...S(e)});class ie extends Z{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===k.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:a}=this._processInputParams(e),r=this._def.effect||null,s={addIssue:i=>{h(a,i),i.fatal?t.abort():t.dirty()},get path(){return a.path}};if(s.addIssue=s.addIssue.bind(s),r.type==="preprocess"){const i=r.transform(a.data,s);if(a.common.async)return Promise.resolve(i).then(async o=>{if(t.value==="aborted")return w;const c=await this._def.schema._parseAsync({data:o,path:a.path,parent:a});return c.status==="aborted"?w:c.status==="dirty"||t.value==="dirty"?We(c.value):c});{if(t.value==="aborted")return w;const o=this._def.schema._parseSync({data:i,path:a.path,parent:a});return o.status==="aborted"?w:o.status==="dirty"||t.value==="dirty"?We(o.value):o}}if(r.type==="refinement"){const i=o=>{const c=r.refinement(o,s);if(a.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(a.common.async===!1){const o=this._def.schema._parseSync({data:a.data,path:a.path,parent:a});return o.status==="aborted"?w:(o.status==="dirty"&&t.dirty(),i(o.value),{status:t.value,value:o.value})}else return this._def.schema._parseAsync({data:a.data,path:a.path,parent:a}).then(o=>o.status==="aborted"?w:(o.status==="dirty"&&t.dirty(),i(o.value).then(()=>({status:t.value,value:o.value}))))}if(r.type==="transform")if(a.common.async===!1){const i=this._def.schema._parseSync({data:a.data,path:a.path,parent:a});if(!at(i))return i;const o=r.transform(i.value,s);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:o}}else return this._def.schema._parseAsync({data:a.data,path:a.path,parent:a}).then(i=>at(i)?Promise.resolve(r.transform(i.value,s)).then(o=>({status:t.value,value:o})):i);R.assertNever(r)}}ie.create=(n,e,t)=>new ie({schema:n,typeName:k.ZodEffects,effect:e,...S(t)});ie.createWithPreprocess=(n,e,t)=>new ie({schema:e,effect:{type:"preprocess",transform:n},typeName:k.ZodEffects,...S(t)});class le extends Z{_parse(e){return this._getType(e)===v.undefined?K(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}le.create=(n,e)=>new le({innerType:n,typeName:k.ZodOptional,...S(e)});class Ze extends Z{_parse(e){return this._getType(e)===v.null?K(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ze.create=(n,e)=>new Ze({innerType:n,typeName:k.ZodNullable,...S(e)});class mt extends Z{_parse(e){const{ctx:t}=this._processInputParams(e);let a=t.data;return t.parsedType===v.undefined&&(a=this._def.defaultValue()),this._def.innerType._parse({data:a,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}mt.create=(n,e)=>new mt({innerType:n,typeName:k.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...S(e)});class vt extends Z{_parse(e){const{ctx:t}=this._processInputParams(e),a={...t,common:{...t.common,issues:[]}},r=this._def.innerType._parse({data:a.data,path:a.path,parent:{...a}});return rt(r)?r.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Q(a.common.issues)},input:a.data})})):{status:"valid",value:r.status==="valid"?r.value:this._def.catchValue({get error(){return new Q(a.common.issues)},input:a.data})}}removeCatch(){return this._def.innerType}}vt.create=(n,e)=>new vt({innerType:n,typeName:k.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...S(e)});class jt extends Z{_parse(e){if(this._getType(e)!==v.nan){const a=this._getOrReturnCtx(e);return h(a,{code:u.invalid_type,expected:v.nan,received:a.parsedType}),w}return{status:"valid",value:e.data}}}jt.create=n=>new jt({typeName:k.ZodNaN,...S(n)});const cr=Symbol("zod_brand");class nn extends Z{_parse(e){const{ctx:t}=this._processInputParams(e),a=t.data;return this._def.type._parse({data:a,path:t.path,parent:t})}unwrap(){return this._def.type}}class pt extends Z{_parse(e){const{status:t,ctx:a}=this._processInputParams(e);if(a.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:a.data,path:a.path,parent:a});return s.status==="aborted"?w:s.status==="dirty"?(t.dirty(),We(s.value)):this._def.out._parseAsync({data:s.value,path:a.path,parent:a})})();{const r=this._def.in._parseSync({data:a.data,path:a.path,parent:a});return r.status==="aborted"?w:r.status==="dirty"?(t.dirty(),{status:"dirty",value:r.value}):this._def.out._parseSync({data:r.value,path:a.path,parent:a})}}static create(e,t){return new pt({in:e,out:t,typeName:k.ZodPipeline})}}class _t extends Z{_parse(e){const t=this._def.innerType._parse(e),a=r=>(at(r)&&(r.value=Object.freeze(r.value)),r);return rt(t)?t.then(r=>a(r)):a(t)}unwrap(){return this._def.innerType}}_t.create=(n,e)=>new _t({innerType:n,typeName:k.ZodReadonly,...S(e)});function In(n,e={},t){return n?Xe.create().superRefine((a,r)=>{var s,i;if(!n(a)){const o=typeof e=="function"?e(a):typeof e=="string"?{message:e}:e,c=(i=(s=o.fatal)!==null&&s!==void 0?s:t)!==null&&i!==void 0?i:!0,d=typeof o=="string"?{message:o}:o;r.addIssue({code:"custom",...d,fatal:c})}}):Xe.create()}const dr={object:z.lazycreate};var k;(function(n){n.ZodString="ZodString",n.ZodNumber="ZodNumber",n.ZodNaN="ZodNaN",n.ZodBigInt="ZodBigInt",n.ZodBoolean="ZodBoolean",n.ZodDate="ZodDate",n.ZodSymbol="ZodSymbol",n.ZodUndefined="ZodUndefined",n.ZodNull="ZodNull",n.ZodAny="ZodAny",n.ZodUnknown="ZodUnknown",n.ZodNever="ZodNever",n.ZodVoid="ZodVoid",n.ZodArray="ZodArray",n.ZodObject="ZodObject",n.ZodUnion="ZodUnion",n.ZodDiscriminatedUnion="ZodDiscriminatedUnion",n.ZodIntersection="ZodIntersection",n.ZodTuple="ZodTuple",n.ZodRecord="ZodRecord",n.ZodMap="ZodMap",n.ZodSet="ZodSet",n.ZodFunction="ZodFunction",n.ZodLazy="ZodLazy",n.ZodLiteral="ZodLiteral",n.ZodEnum="ZodEnum",n.ZodEffects="ZodEffects",n.ZodNativeEnum="ZodNativeEnum",n.ZodOptional="ZodOptional",n.ZodNullable="ZodNullable",n.ZodDefault="ZodDefault",n.ZodCatch="ZodCatch",n.ZodPromise="ZodPromise",n.ZodBranded="ZodBranded",n.ZodPipeline="ZodPipeline",n.ZodReadonly="ZodReadonly"})(k||(k={}));const lr=(n,e={message:`Input not instance of ${n.name}`})=>In(t=>t instanceof n,e),Rn=ae.create,jn=Te.create,ur=jt.create,fr=Se.create,Mn=st.create,hr=je.create,mr=Nt.create,vr=it.create,_r=ot.create,pr=Xe.create,gr=Ie.create,yr=be.create,br=It.create,xr=se.create,kr=z.create,wr=z.strictCreate,Tr=ct.create,Sr=Mt.create,Er=dt.create,Zr=fe.create,Or=lt.create,Cr=Rt.create,Nr=Me.create,Ir=Ye.create,Rr=ut.create,jr=ft.create,Mr=Ee.create,Ar=ht.create,Dr=Ge.create,un=ie.create,Pr=le.create,Vr=Ze.create,Lr=ie.createWithPreprocess,zr=pt.create,Ur=()=>Rn().optional(),Br=()=>jn().optional(),Wr=()=>Mn().optional(),Yr={string:n=>ae.create({...n,coerce:!0}),number:n=>Te.create({...n,coerce:!0}),boolean:n=>st.create({...n,coerce:!0}),bigint:n=>Se.create({...n,coerce:!0}),date:n=>je.create({...n,coerce:!0})},Hr=w;var xe=Object.freeze({__proto__:null,defaultErrorMap:Je,setErrorMap:Ha,getErrorMap:Zt,makeIssue:Ot,EMPTY_PATH:qa,addIssueToContext:h,ParseStatus:J,INVALID:w,DIRTY:We,OK:K,isAborted:Ft,isDirty:Kt,isValid:at,isAsync:rt,get util(){return R},get objectUtil(){return Gt},ZodParsedType:v,getParsedType:ke,ZodType:Z,datetimeRegex:Cn,ZodString:ae,ZodNumber:Te,ZodBigInt:Se,ZodBoolean:st,ZodDate:je,ZodSymbol:Nt,ZodUndefined:it,ZodNull:ot,ZodAny:Xe,ZodUnknown:Ie,ZodNever:be,ZodVoid:It,ZodArray:se,ZodObject:z,ZodUnion:ct,ZodDiscriminatedUnion:Mt,ZodIntersection:dt,ZodTuple:fe,ZodRecord:lt,ZodMap:Rt,ZodSet:Me,ZodFunction:Ye,ZodLazy:ut,ZodLiteral:ft,ZodEnum:Ee,ZodNativeEnum:ht,ZodPromise:Ge,ZodEffects:ie,ZodTransformer:ie,ZodOptional:le,ZodNullable:Ze,ZodDefault:mt,ZodCatch:vt,ZodNaN:jt,BRAND:cr,ZodBranded:nn,ZodPipeline:pt,ZodReadonly:_t,custom:In,Schema:Z,ZodSchema:Z,late:dr,get ZodFirstPartyTypeKind(){return k},coerce:Yr,any:pr,array:xr,bigint:fr,boolean:Mn,date:hr,discriminatedUnion:Sr,effect:un,enum:Mr,function:Ir,instanceof:lr,intersection:Er,lazy:Rr,literal:jr,map:Cr,nan:ur,nativeEnum:Ar,never:yr,null:_r,nullable:Vr,number:jn,object:kr,oboolean:Wr,onumber:Br,optional:Pr,ostring:Ur,pipeline:zr,preprocess:Lr,promise:Dr,record:Or,set:Nr,strictObject:wr,string:Rn,symbol:mr,transformer:un,tuple:Zr,undefined:vr,union:Tr,unknown:gr,void:br,NEVER:Hr,ZodIssueCode:u,quotelessJson:Ya,ZodError:Q});const qr=n=>n?n.constructor===Object||n.constructor===void 0:!1,Jr=Object.freeze({}),An=n=>!n||!qr(n)?n:Object.fromEntries(Object.entries(n).sort((e,t)=>e[0]>t[0]?1:-1).map(([e,t])=>[e,An(t)])),fn="application/vnd.github+json",Xr="2022-11-28",an=async(n,e)=>{const{request:t,params:a,parse:r,token:s,cache:i,return_early_from_cache:o,log:c,fetch:d=globalThis.fetch}=e??Jr,l=typeof n=="string"?new URL(n):n,_=l.href,b=(t==null?void 0:t.method)??(a?"POST":"GET");let m,x;if(i&&(x=Qr(_,a,b),m=i.get(x),o&&m))return c==null||c.info("[fetch_value] cached locally and returning early",_),c==null||c.debug("[fetch_value] cached value",m),{ok:!0,value:m.value,headers:hn(m)};const C=(t==null?void 0:t.body)??(b==="GET"||b==="HEAD"?null:JSON.stringify(a??{})),N=new Headers(t==null?void 0:t.headers);N.has("accept")||N.set("accept",l.hostname==="api.github.com"?fn:"application/json"),N.get("accept")===fn&&!N.has("x-github-api-version")&&N.set("x-github-api-version",Xr),C&&!N.has("content-type")&&N.set("content-type","application/json"),s&&!N.has("authorization")&&N.set("authorization","Bearer "+s);const O=m==null?void 0:m.etag;if(O&&!N.has("if-none-match"))N.set("if-none-match",O);else{const ne=m==null?void 0:m.last_modified;ne&&!N.has("if-modified-since")&&N.set("if-modified-since",ne)}const V=new Request(l,{...t,headers:N,method:b,body:C});c==null||c.info("[fetch_value] fetching url with headers",n),c==null||c.debug("[fetch_value] fetching with headers",Gr(N));const I=await d(V);if(c==null||c.info("[fetch_value] fetched",n,I.status,Fr(I.headers)),c==null||c.debug("[fetch_value] fetched",Object.fromEntries(I.headers.entries())),I.status===429)throw Error("ratelimited exceeded fetching url "+n);if(I.status===304){if(!m)throw Error("unexpected 304 status without a cached value");return c==null||c.info("[fetch_value] cache hit",n),{ok:!0,value:m.value,headers:hn(m)}}if(!I.ok)return{ok:!1,status:I.status,message:I.statusText};const X=I.headers.get("content-type"),$=await(!X||X.includes("json")?I.json():I.text()),L=r?r($):$;if(c==null||c.debug("[fetch_value] fetched json",n,L),x){const ne={key:x,url:_,params:a,value:L,etag:I.headers.get("etag"),last_modified:I.headers.get("etag")?null:I.headers.get("last-modified")};i.set(x,ne)}return{ok:!0,value:L,headers:I.headers}},hn=n=>{const e=new Headers;return n.etag&&e.set("etag",n.etag),n.last_modified&&e.set("last-modified",n.last_modified),e},Gr=n=>{const e=Object.fromEntries(n.entries());return e.authorization&&(e.authorization="[REDACTED]"),e},Fr=n=>{const e=n.get("x-ratelimit-limit"),t=n.get("x-ratelimit-remaining");return e||t?`ratelimit ${t} of ${e}`:""},Dn=xe.string(),Kr=xe.object({key:Dn,url:xe.string(),params:xe.any(),value:xe.any(),etag:xe.string().nullable(),last_modified:xe.string().nullable()});xe.map(Dn,Kr);const mn="::",Qr=(n,e,t)=>{let a=t+mn+n;return e!=null&&(a+=mn+JSON.stringify(An(e))),a};class $r extends Error{constructor(e,t=`Unreachable case: ${e}`){super(t)}}const es=n=>Array.isArray(n)?n:[n],ts=(n,e)=>`https://${n}/api/v1/statuses/${e}`,ns=(n,e)=>`https://${n}/api/v1/statuses/${e}/context`,as=(n,e)=>`https://${n}/api/v1/statuses/${e}/favourited_by`,Pn=n=>{try{const e=new URL(n),t=fa(e.pathname,"/context").split("/").filter(Boolean),a=t[0][0]==="@"?t[0].substring(1):null;if(!a)return null;const r=t.length>1?t[t.length-1]:null;return r?{href:n,host:e.host,author:a,status_id:r}:null}catch{return null}},rs=async(n,e,t,a,r,s,i)=>{const o=ns(n,e),c=await an(o,{request:r,token:s,cache:t,return_early_from_cache:en,log:a,fetch:i});return c.ok?c.value:null},ss=async(n,e,t,a,r,s,i)=>{const o=ts(n,e),c=await an(o,{request:r,token:s,cache:t,return_early_from_cache:en,log:a,fetch:i});return c.ok?c.value:null},is=async(n,e,t,a,r,s,i)=>{const o=as(n,e),c=await an(o,{request:r,token:s,cache:t,return_early_from_cache:en,log:a,fetch:i});return c.ok?c.value:null},os=async(n,e,t,a,r)=>{const s=t?es(t):null,i=e.descendants;if(!i.length||!(s!=null&&s.length))return[];const o=new URL(n.url).host,c=new Set;for(const d of i)for(const l of s)if(l.type==="favourited_by"){if(!d.favourites_count)continue;const _=await is(o,d.id,a,r);if(_==null?void 0:_.find(m=>l.favourited_by.includes(m.acct))){c.add(d.id);break}}else if(l.type==="minimum_favourites"){if(d.favourites_count>=l.minimum_favourites){c.add(d.id);break}}else if(l.type==="custom"){if(l.should_include(d,n,e)){c.add(d.id);break}}else throw new $r(l);return i.filter(d=>c.has(d.id)?d:null)};function cs(n,e){he(e,!0);let t=B(e,"include_ancestors",3,!1),a=B(e,"include_replies",3,!1),r=B(e,"loading",15),s=B(e,"item",15),i=B(e,"status_context",15),o=B(e,"replies",15),c=B(e,"load_time",15);const d=E(()=>t()||a()),l=E(()=>e.reply_filter===void 0?a()?{type:"custom",should_include:()=>!0}:null:e.reply_filter),_=async()=>{if(!e.host||!e.id)return;const x=performance.now();r(!0),await(async C=>(s(C[0]),i(C[1])))(await Promise.all([ss(e.host,e.id,e.cache,e.log),f(d)?rs(e.host,e.id,e.cache,e.log):null])),s()&&i()?o(await os(s(),i(),typeof f(l)=="function"?f(l)(s(),i()):f(l),e.cache,e.log)):o(null),r(!1),c(performance.now()-x)};var b=ye(),m=re(b);te(m,()=>e.children,()=>({item:s(),status_context:i(),replies:o(),load:_,loading:r(),load_time:c()})),T(n,b),me()}const vn=(n,e,t)=>{try{const a=localStorage.getItem(n);if(!a)return e();const r=JSON.parse(a);return t==null||t(r),r}catch{try{localStorage.removeItem(n)}catch{}return e()}},_n=(n,e)=>{try{e===void 0?localStorage.removeItem(n):localStorage.setItem(n,JSON.stringify(e))}catch{}},pn={inform:{color:"var(--text_color_3)",icon:"✻"},help:{color:"var(--color_b_5)",icon:"➺"},error:{color:"var(--color_c_5)",icon:"!?"}};var ds=P('<div class="icon svelte-tarwjh"><!></div>'),ls=P('<!> <div class="content svelte-tarwjh"><!></div>',1),us=P("<button><!></button>"),fs=P("<div><!></div>");function hs(n,e){he(e,!0);const t=m=>{var x=ls(),C=re(x);{var N=I=>{var X=ds(),$=g(X);{var L=W=>{var M=we();H(()=>ge(M,f(c))),T(W,M)},ne=W=>{var M=ye(),Y=re(M);te(Y,()=>e.icon,()=>f(c)),T(W,M)};U($,W=>{!e.icon||typeof e.icon=="string"?W(L):W(ne,!1)})}p(X),T(I,X)};U(C,I=>{e.icon!==null&&I(N)})}var O=j(C,2),V=g(O);te(V,()=>e.children),p(O),T(m,x)},a=B(e,"status",3,"inform"),r=E(()=>pn[a()]),s=E(()=>f(r).color),i=E(()=>f(r).icon),o=E(()=>e.color??f(s)),c=E(()=>typeof e.icon=="string"?e.icon:f(i)??pn.inform.icon);var d=ye(),l=re(d);{var _=m=>{var x=us();let C;var N=g(x);t(N),p(x),H(()=>{C=He(x,C,{class:"message",type:"button",onclick:e.onclick,disabled:e.disabled,...e.attrs},"svelte-tarwjh"),Ne(x,"--text_color",f(o))}),T(m,x)},b=m=>{var x=fs();let C;var N=g(x);t(N),p(x),H(()=>{C=He(x,C,{role:"alert",class:"message panel",...e.attrs},"svelte-tarwjh"),Ne(x,"--text_color",f(o))}),T(m,x)};U(l,m=>{e.onclick?m(_):m(b,!1)})}T(n,d),me()}var ms=P("<div><!></div>"),vs=P('<fieldset><div class="row"><label title="where to load the toot" class="flex_1 row"><a class="icon_button box mr_lg">🔗</a> <input></label></div> <!></fieldset>');function _s(n,e){he(e,!0);let t=B(e,"url",15);const a=E(()=>Pn(t())),r=E(()=>!!(t()&&!f(a)));var s=vs(),i=g(s),o=g(i),c=g(o),d=j(c,2);kn(d);var l=x=>x.currentTarget.select();let _;p(o),p(i);var b=j(i,2);{var m=x=>{var C=ms(),N=g(C);hs(N,{status:"error",children:(O,V)=>{Jt();var I=we("invalid Mastodon status url");T(O,I)},$$slots:{default:!0}}),p(C),_e(3,C,()=>pe),T(x,C)};U(b,x=>{f(r)&&x(m)})}p(s),H(()=>{qe(i,"mb_lg",f(r)),ee(c,"href",t()||void 0),Ne(c,"font-size","var(--size_xl)"),_=He(d,_,{placeholder:"> toot url",onfocus:l,...e.attrs})}),ma(d,t),T(n,s),me()}const ps=(n,e)=>{e(!e())};var gs=P("<div></div>"),ys=P('<div class="transition_wrapper svelte-esn2at"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></div>'),bs=P('<div class="icon_button_content svelte-esn2at"><div class="icon svelte-esn2at">🦣</div> <div class="button_content svelte-esn2at"><div>load toot<!> from</div> <code class="ellipsis"><!></code></div></div>'),xs=P('<div class="transition_wrapper svelte-esn2at"><!></div>'),ks=P('<div class="pb_md"><a rel="noreferrer" class="block panel p_md"><span class="font_mono">↪︎</span> reply on Mastodon</a></div>'),ws=P('<div class="loaded_message svelte-esn2at"> </div>'),Ts=P(`<div class="settings controls panel svelte-esn2at"><form class="w_100"><div class="mb_lg"><!></div> <fieldset class="row"><label class="row"><input type="checkbox">automatically load when
										scrolled onscreen</label></fieldset></form> <!></div>`),Ss=P('<div class="toot svelte-esn2at"><div class="toot_content svelte-esn2at"><!> <div class="main_post panel svelte-esn2at"><div class="panel bg_panel svelte-esn2at"><!></div></div> <!></div> <!> <div class="toot_controls svelte-esn2at"><div class="controls svelte-esn2at"><div class="row"><button type="button" class="deselectable">settings</button> <div class="reset svelte-esn2at"><button type="button">reset</button><!></div></div></div> <!></div></div>');function Es(n,e){he(e,!0);let t=B(e,"updated_url",31,()=>la(e.url)),a=B(e,"include_ancestors",3,!1),r=B(e,"include_replies",3,!1),s=B(e,"loading",15),i=B(e,"load_time",15),o=B(e,"initial_show_settings",3,!1),c=B(e,"show_settings",15),d=B(e,"autoload_storage_key",3,"autoload"),l=B(e,"initial_autoload",3,!1),_=B(e,"autoload",23,()=>d()?vn(d(),()=>l()):l()),b=$t(1);const m=()=>{var L;ca(b),t(e.url),s(void 0),i(void 0),(L=e.onreset)==null||L.call(e)},x=E(()=>e.settings_storage_key&&"show_settings"+e.settings_storage_key);Ut(()=>{c()===void 0&&c(f(x)?vn(f(x),()=>o()):o())}),Ut(()=>{f(x)&&_n(f(x),c())}),Ut(()=>{d()&&_n(d(),_())});const C=E(()=>Pn(t())),N=E(()=>{var L;return((L=f(C))==null?void 0:L.status_id)??null}),O=E(()=>{var L;return((L=f(C))==null?void 0:L.host)??null}),V=E(()=>s()!==!1&&!!f(O)),I=E(()=>s()!==void 0||t()!==e.url);var X=ye(),$=re(X);return ka($,()=>f(b),L=>{cs(L,{get host(){return f(O)},get id(){return f(N)},get include_ancestors(){return a()},get include_replies(){return r()},get cache(){return e.cache},get log(){return e.log},get reply_filter(){return e.reply_filter},get loading(){return s()},set loading(W){s(W)},get load_time(){return i()},set load_time(W){i(W)},children:(W,M)=>{let Y=()=>M==null?void 0:M().item,Oe=()=>M==null?void 0:M().status_context,Ae=()=>M==null?void 0:M().replies,De=()=>M==null?void 0:M().load,Pe=()=>M==null?void 0:M().loading,gt=()=>M==null?void 0:M().load_time;var oe=Ss(),Fe=g(oe),Ve=g(Fe);{var Ke=D=>{var A=gs();wn(A,21,()=>Oe().ancestors,ha,(F,Ce)=>{Xt(F,{get item(){return f(Ce)}})}),p(A),_e(3,A,()=>pe),T(D,A)};U(Ve,D=>{a()&&Oe()&&D(Ke)})}var Qe=j(Ve,2),$e=g(Qe),At=g($e);{var yt=D=>{var A=ys(),F=g(A);wa(F,()=>({"--margin":"0"})),Xt(F.lastChild,{get item(){return Y()}}),p(F),p(A),_e(3,A,()=>pe),T(D,A)},Dt=D=>{var A=xs(),F=g(A),Ce=E(()=>Pe()||!1),zt=E(()=>!f(V));Va(F,{get pending(){return f(Ce)},get disabled(){return f(zt)},onclick:()=>De()(),children:(kt,wt)=>{var ze=bs(),Tt=j(g(ze),2),et=g(Tt),Bn=j(g(et));{var Wn=de=>{var Ue=we("s");T(de,Ue)};U(Bn,de=>{(r()||a())&&de(Wn)})}Jt(),p(et);var sn=j(et,2),Yn=g(sn);{var Hn=de=>{var Ue=we();H(()=>ge(Ue,f(O))),T(de,Ue)},qn=de=>{var Ue=we("invalid url");T(de,Ue)};U(Yn,de=>{f(O)?de(Hn):de(qn,!1)})}p(sn),p(Tt),p(ze),T(kt,ze)},$$slots:{default:!0}}),p(A),_e(3,A,()=>pe),T(D,A)};U(At,D=>{Y()?D(yt):D(Dt,!1)})}p($e),p(Qe);var Pt=j(Qe,2);{var Vt=D=>{Tn(D,{get item(){return Y()},get items(){return Ae()}})};U(Pt,D=>{Y()&&Ae()&&D(Vt)})}p(Fe);var G=j(Fe,2);{var q=D=>{var A=ks(),F=g(A);p(A),H(()=>ee(F,"href",Y().url)),_e(3,A,()=>pe),T(D,A)};U(G,D=>{Y()&&D(q)})}var ce=j(G,2),Le=g(ce),bt=g(Le),xt=g(bt);xt.__click=[ps,c],Ne(xt,"margin-right","var(--space_sm)");var rn=j(xt,2),Lt=g(rn);Lt.__click=m;var Vn=j(Lt);{var Ln=D=>{var A=ws(),F=g(A);H(()=>ge(F,`loaded in ${Math.round(gt())??""}ms`)),p(A),_e(3,A,()=>pe),T(D,A)};U(Vn,D=>{gt()!==void 0&&D(Ln)})}p(rn),p(bt),p(Le),Ta(Le,(D,A)=>Yt==null?void 0:Yt(D,A),()=>({onintersect:({intersecting:D})=>{D&&_()&&De()()},count:1}));var zn=j(Le,2);{var Un=D=>{var A=Ts(),F=g(A),Ce=g(F),zt=g(Ce);_s(zt,{get url(){return t()},set url(et){t(et)}}),p(Ce);var kt=j(Ce,2),wt=g(kt),ze=g(wt);kn(ze),Jt(),p(wt),p(kt),p(F);var Tt=j(F,2);te(Tt,()=>e.settings??xn),p(A),H(()=>ee(wt,"title",_()?"replies will load automatically when scrolled intersect":"replies are not loaded until you request them")),va(ze,_),_e(3,A,()=>pe),T(D,A)};U(zn,D=>{c()&&D(Un)})}p(ce),p(oe),H(()=>{qe(oe,"replies",Ae()),qe(xt,"selected",c()),Lt.disabled=!f(I)}),_e(3,oe,()=>pe),T(W,oe)},$$slots:{default:!0}})}),T(n,X),me({reset:m})}gn(["click"]);var Zs=P('<header><h1 class="mt_xl5 mb_lg"> </h1> <p class="mb_xl5"><!></p></header>');function Os(n,e){he(e,!0);var t=Zs(),a=g(t),r=g(a,!0);p(a);var s=j(a,2),i=g(s);ya(i,{get item(){return e.item}}),p(s),p(t),H(()=>ge(r,e.item.title)),T(n,t),me()}const Cs=n=>{var e=Ns();T(n,e)};var Ns=P("<hr>"),Is=P("<!>  <section><h2>Comments</h2> <!></section> <!>",1),Rs=P("<article><!> <!> <!> <!></article>"),js=P("<div>cannot find post <code> </code></div>"),Ms=P('<div class="blog_post width_md"><!></div>');function Gs(n,e){he(e,!0);const t=B(e,"separator",3,Cs),r=xa.get().items.find(l=>l.slug===e.post.slug),s=Sa.maybe_get();var i=Ms();Jn(l=>{H(()=>da.title=e.post.title)});var o=g(i);{var c=l=>{var _=Rs();let b;var m=g(_);Os(m,{item:r});var x=j(m,2);te(x,()=>e.children);var C=j(x,2);te(C,()=>e.footer??xn);var N=j(C,2);{var O=V=>{var I=Is(),X=re(I);te(X,t);var $=j(X,2),L=j(g($),2);{var ne=M=>{var Y=E(()=>s==null?void 0:s.data);Es(M,{get url(){return r.comments.url},include_replies:!0,initial_autoload:!0,reply_filter:Oe=>({type:"favourited_by",favourited_by:[Oe.account.acct]}),get settings_storage_key(){return`${r.id??""}_comments_settings`},get cache(){return f(Y)}})};U(L,M=>{(!s||s.data!==void 0)&&M(ne)})}p($);var W=j($,2);te(W,t),T(V,I)};U(N,V=>{r.comments&&V(O)})}p(_),H(()=>b=He(_,b,{...e.attrs})),T(l,_)},d=l=>{var _=js(),b=j(g(_)),m=g(b,!0);p(b),p(_),H(()=>ge(m,e.post.slug)),T(l,_)};U(o,l=>{r?l(c):l(d,!1)})}p(i),T(n,i),me()}export{Gs as B};
